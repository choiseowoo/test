### **âœ… JSF + MyBatisë¡œ í™”ë©´ì— ë°ì´í„° í‘œì‹œí•˜ëŠ” ì˜ˆì œ ì½”ë“œ**  
**í™˜ê²½:**  
- **Jakarta EE (Java EE) + JSF (JavaServer Faces) + MyBatis + WildFly**  
- **DB:** AWS Aurora (PostgreSQL) ë˜ëŠ” ì¼ë°˜ì ì¸ PostgreSQL  
- **Java 1.8ì—ì„œë„ ë™ì‘ ê°€ëŠ¥í•˜ë„ë¡ ì‘ì„±**  

#### **ğŸ“Œ ê¸°ëŠ¥**  
1. MyBatisë¥¼ ì´ìš©í•´ **DBì—ì„œ ì‚¬ìš©ì ëª©ë¡ì„ ì¡°íšŒ**  
2. ì¡°íšŒëœ ë°ì´í„°ë¥¼ **JSF í™”ë©´(xhtml)ì—ì„œ ì¶œë ¥**  

---

## **1ï¸âƒ£ `mybatis-config.xml` (MyBatis ì„¤ì • íŒŒì¼)**
ğŸ“Œ `src/main/resources/mybatis-config.xml`
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="org.postgresql.Driver"/>
                <property name="url" value="jdbc:postgresql://localhost:5432/mydb"/>
                <property name="username" value="myuser"/>
                <property name="password" value="mypassword"/>
            </dataSource>
        </environment>
    </environments>
    
    <mappers>
        <mapper resource="mapper/UserMapper.xml"/>
    </mappers>
</configuration>
```
> **ğŸ’¡ PostgreSQLì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `postgresql.Driver`ë¥¼ ì§€ì •í•´ì•¼ í•¨**  
> **ğŸ’¡ `UserMapper.xml`ì—ì„œ SQLì„ ì •ì˜í•  ì˜ˆì •**

---

## **2ï¸âƒ£ `UserMapper.xml` (SQL ë§¤í•‘)**
ğŸ“Œ `src/main/resources/mapper/UserMapper.xml`
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.UserMapper">
    <select id="getAllUsers" resultType="com.example.model.User">
        SELECT id, username, email FROM users;
    </select>
</mapper>
```
> **ğŸ’¡ `users` í…Œì´ë¸”ì—ì„œ `id`, `username`, `email` ì¡°íšŒí•˜ëŠ” SQL**  
> **ğŸ’¡ `com.example.mapper.UserMapper` ì¸í„°í˜ì´ìŠ¤ì™€ ì—°ê²°ë¨**  

---

## **3ï¸âƒ£ `User.java` (ëª¨ë¸ í´ë˜ìŠ¤)**
ğŸ“Œ `src/main/java/com/example/model/User.java`
```java
package com.example.model;

import java.io.Serializable;

public class User implements Serializable {
    private Long id;
    private String username;
    private String email;

    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
}
```
> **ğŸ’¡ JSFëŠ” JavaBean ê·œì¹™(getter/setter) ì‚¬ìš©í•´ì•¼ ë°ì´í„° ë°”ì¸ë”© ê°€ëŠ¥!**  

---

## **4ï¸âƒ£ `UserMapper.java` (MyBatis ë§¤í¼ ì¸í„°í˜ì´ìŠ¤)**
ğŸ“Œ `src/main/java/com/example/mapper/UserMapper.java`
```java
package com.example.mapper;

import com.example.model.User;
import java.util.List;

public interface UserMapper {
    List<User> getAllUsers();
}
```
> **ğŸ’¡ MyBatisì—ì„œ XML íŒŒì¼ê³¼ ì—°ê²°ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤**  
> **ğŸ’¡ `UserMapper.xml`ì˜ `getAllUsers` SQL ì‹¤í–‰**  

---

## **5ï¸âƒ£ `MyBatisUtil.java` (MyBatis ì„¤ì • ë¡œë”©)**
ğŸ“Œ `src/main/java/com/example/util/MyBatisUtil.java`
```java
package com.example.util;

import java.io.InputStream;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

public class MyBatisUtil {
    private static SqlSessionFactory sqlSessionFactory;

    static {
        try {
            InputStream inputStream = Resources.getResourceAsStream("mybatis-config.xml");
            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        } catch (Exception e) {
            throw new RuntimeException("MyBatis ì„¤ì • ë¡œë”© ì‹¤íŒ¨", e);
        }
    }

    public static SqlSession getSession() {
        return sqlSessionFactory.openSession();
    }
}
```
> **ğŸ’¡ `getSession()`ì„ ì‚¬ìš©í•´ MyBatis `SqlSession`ì„ ì–»ì„ ìˆ˜ ìˆìŒ**  

---

## **6ï¸âƒ£ `UserBean.java` (JSFì˜ ë°±ì—”ë“œ Bean)**
ğŸ“Œ `src/main/java/com/example/bean/UserBean.java`
```java
package com.example.bean;

import com.example.mapper.UserMapper;
import com.example.model.User;
import com.example.util.MyBatisUtil;
import jakarta.enterprise.context.RequestScoped;
import jakarta.inject.Named;
import org.apache.ibatis.session.SqlSession;
import java.io.Serializable;
import java.util.List;

@Named
@RequestScoped
public class UserBean implements Serializable {
    private List<User> users;

    public List<User> getUsers() {
        if (users == null) {
            try (SqlSession session = MyBatisUtil.getSession()) {
                UserMapper mapper = session.getMapper(UserMapper.class);
                users = mapper.getAllUsers();
            }
        }
        return users;
    }
}
```
> **ğŸ’¡ `@Named` ì‚¬ìš©: JSFì—ì„œ EL(Expression Language)ë¡œ ì ‘ê·¼ ê°€ëŠ¥**  
> **ğŸ’¡ `@RequestScoped` ì‚¬ìš©: ìš”ì²­ ì‹œë§ˆë‹¤ ìƒˆë¡­ê²Œ ë°ì´í„° ì¡°íšŒ**  

---

## **7ï¸âƒ£ `users.xhtml` (JSF í™”ë©´)**
ğŸ“Œ `src/main/webapp/users.xhtml`
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>ì‚¬ìš©ì ëª©ë¡</title>
    </h:head>
    <h:body>
        <h1>ì‚¬ìš©ì ëª©ë¡</h1>
        <h:dataTable value="#{userBean.users}" var="user" border="1">
            <h:column>
                <f:facet name="header">ID</f:facet>
                #{user.id}
            </h:column>
            <h:column>
                <f:facet name="header">ì´ë¦„</f:facet>
                #{user.username}
            </h:column>
            <h:column>
                <f:facet name="header">ì´ë©”ì¼</f:facet>
                #{user.email}
            </h:column>
        </h:dataTable>
    </h:body>
</html>
```
> **ğŸ’¡ `userBean.users`ë¥¼ ì¡°íšŒí•´ í…Œì´ë¸”ì— ë°ì´í„° í‘œì‹œ**  
> **ğŸ’¡ `h:dataTable`ì„ ì‚¬ìš©í•´ ë°˜ë³µ ë Œë”ë§**  

---

## **âœ… ì‹¤í–‰ ë°©ë²•**
1. **PostgreSQL DB ì„¤ì •**  
   - `mybatis-config.xml`ì—ì„œ `url`, `username`, `password`ë¥¼ ì‹¤ì œ DB ê°’ìœ¼ë¡œ ë³€ê²½  
   - `users` í…Œì´ë¸”ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸  
   
2. **Maven ë¹Œë“œ í›„ WildFly ë°°í¬**  
```sh
mvn clean package
```
- `target/myapp.war`ê°€ ìƒì„±ë˜ë©´ WildFlyì— ë°°í¬  

3. **JSF í™”ë©´ ì ‘ê·¼**  
   - ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰  
   ```
   http://localhost:8080/myapp/users.xhtml
   ```
   - ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ DBì˜ `users` ë°ì´í„°ê°€ í…Œì´ë¸”ë¡œ í‘œì‹œë¨  

---

## **ğŸ“Œ ê²°ë¡ **
âœ… **JSF + MyBatisë¡œ ë°ì´í„° ì¡°íšŒ ë° í™”ë©´ í‘œì‹œ**  
âœ… **MyBatisì˜ SqlSessionFactoryë¥¼ í™œìš©í•œ DB ì—°ê²°**  
âœ… **JSFì—ì„œ `h:dataTable`ì„ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ í™”ë©´ì— ì¶œë ¥**  

ì´ì œ **JSF í™”ë©´ì—ì„œ DBì˜ ë°ì´í„°ë¥¼ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”!** ğŸš€  
**ë¬¸ì œ ìˆìœ¼ë©´ ì•Œë ¤ì¤˜~!**
