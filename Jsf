ë„¤, ì£¼ì–´ì§„ ì„¤ëª…ì„ ê¸°ë°˜ìœ¼ë¡œ **3ì¸µ êµ¬ì¡°(3-tier)ì—ì„œ 2ì¸µ êµ¬ì¡°(2-tier)ë¡œ ë³€ê²½ëœ í™˜ê²½**ì„ ê°€ì •í•˜ì—¬ **JSF + DAO + MyBatis** í˜•íƒœë¡œ ì˜ˆì œ ì½”ë“œë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.  

---

## **ğŸ“Œ ë³€ê²½ëœ 2ì¸µ êµ¬ì¡° ê°œìš”**
- ê¸°ì¡´ **3ì¸µ êµ¬ì¡°** â†’ **2ì¸µ êµ¬ì¡°(í”„ë ˆì  í…Œì´ì…˜ + ì• í”Œë¦¬ì¼€ì´ì…˜ í†µí•©)**
- **Seasar2 íì§€** â†’ MyBatisë¥¼ ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥ì„± í¼
- **JSF ê¸°ë°˜ (JSPê°€ ì•„ë‹ˆë¼ .xhtml)** ì‚¬ìš© ê°€ëŠ¥ì„±
- **Service Layerê°€ ìµœì†Œí™”ë˜ê±°ë‚˜ ìƒëµë  ê°€ëŠ¥ì„±**
- **DAOë¥¼ ì§ì ‘ Viewì—ì„œ ì‚¬ìš©í•˜ê±°ë‚˜, ManagedBeanì—ì„œ DAO í˜¸ì¶œ**í•  ê°€ëŠ¥ì„±

---

## **ğŸ“ ì˜ˆì œ ì½”ë“œ: JSF + DAO + MyBatis**
ê¸°ë³¸ì ìœ¼ë¡œ **JSFì˜ ManagedBeanì´ DAOë¥¼ ì§ì ‘ í˜¸ì¶œ**í•˜ëŠ” êµ¬ì¡°ë¡œ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.

### **1ï¸âƒ£ í…Œì´ë¸” ìƒì„± (ì˜ˆì œ: users)**
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);
```

---

### **2ï¸âƒ£ MyBatis ì„¤ì • (`mybatis-config.xml`)**
```xml
<configuration>
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="org.postgresql.Driver"/>
                <property name="url" value="jdbc:postgresql://localhost:5432/mydb"/>
                <property name="username" value="myuser"/>
                <property name="password" value="mypassword"/>
            </dataSource>
        </environment>
    </environments>
</configuration>
```

---

### **3ï¸âƒ£ DTO í´ë˜ìŠ¤ (`User.java`)**
```java
public class User {
    private Long id;
    private String name;
    private String email;

    // Getter & Setter
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
}
```

---

### **4ï¸âƒ£ DAO ì¸í„°í˜ì´ìŠ¤ (`UserDao.java`)**
```java
import java.util.List;
import org.apache.ibatis.annotations.Select;

public interface UserDao {
    @Select("SELECT * FROM users")
    List<User> getAllUsers();
}
```

---

### **5ï¸âƒ£ ManagedBean (`UserBean.java`)**
> ê¸°ì¡´ MVCì²˜ëŸ¼ Controllerë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , **JSFì˜ ManagedBeanì—ì„œ ì§ì ‘ DAOë¥¼ í˜¸ì¶œ**  
```java
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.io.Serializable;
import java.util.List;
import org.apache.ibatis.session.SqlSession;

@Named
@ViewScoped
public class UserBean implements Serializable {
    private List<User> users;

    public List<User> getUsers() {
        if (users == null) {
            try (SqlSession session = MyBatisUtil.getSqlSessionFactory().openSession()) {
                UserDao userDao = session.getMapper(UserDao.class);
                users = userDao.getAllUsers();
            }
        }
        return users;
    }
}
```

---

### **6ï¸âƒ£ MyBatis ìœ í‹¸ í´ë˜ìŠ¤ (`MyBatisUtil.java`)**
```java
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import java.io.InputStream;

public class MyBatisUtil {
    private static SqlSessionFactory sqlSessionFactory;
    
    static {
        try (InputStream inputStream = MyBatisUtil.class.getClassLoader()
                .getResourceAsStream("mybatis-config.xml")) {
            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        } catch (Exception e) {
            throw new RuntimeException("Error initializing MyBatis", e);
        }
    }
    
    public static SqlSessionFactory getSqlSessionFactory() {
        return sqlSessionFactory;
    }
}
```

---

### **7ï¸âƒ£ JSF í˜ì´ì§€ (`users.xhtml`)**
> ê¸°ì¡´ì˜ JSP ëŒ€ì‹  JSFë¥¼ ì‚¬ìš©í•˜ë©°, **EL(Expression Language)ë¡œ ManagedBeanì˜ ë°ì´í„°ë¥¼ ì§ì ‘ ì¶œë ¥**
```xhtml
<h:body>
    <h:dataTable value="#{userBean.users}" var="user">
        <h:column>
            <f:facet name="header">ID</f:facet>
            #{user.id}
        </h:column>
        <h:column>
            <f:facet name="header">Name</f:facet>
            #{user.name}
        </h:column>
        <h:column>
            <f:facet name="header">Email</f:facet>
            #{user.email}
        </h:column>
    </h:dataTable>
</h:body>
```

---

## **ğŸš€ ê²°ë¡ : ê¸°ì¡´ MVCì™€ ë¹„êµ**
| **í•­ëª©**        | **ê¸°ì¡´ 3ì¸µ êµ¬ì¡° (MVC)** | **ë³€ê²½ëœ 2ì¸µ êµ¬ì¡°** |
|----------------|------------------|------------------|
| **í”„ë ˆì  í…Œì´ì…˜** | JSP + Servlet | JSF (ManagedBean) |
| **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§** | Service Layerì—ì„œ ì²˜ë¦¬ | DAOì—ì„œ ì§ì ‘ ì²˜ë¦¬ |
| **ë°ì´í„° ì ‘ê·¼** | DAO â†’ Service â†’ Controller | DAO â†’ ManagedBean |
| **Controller ì—­í• ** | Servletì´ ë‹´ë‹¹ | ManagedBeanì´ ë‹´ë‹¹ |
| **í”„ë ˆì„ì›Œí¬** | Seasar2 | JSF + MyBatis |

**ğŸ’¡ ì£¼ìš” ë³€ê²½ì :**  
- **Controller(Servlet) ì œê±°**, ëŒ€ì‹  **JSF ManagedBeanì´ ì§ì ‘ DAOë¥¼ í˜¸ì¶œ**  
- **Service Layerê°€ ìƒëµë˜ê±°ë‚˜ ì¶•ì†Œ**  
- **JSP â†’ JSF ì‚¬ìš© (ELë¡œ ì§ì ‘ ë°ì´í„° ë°”ì¸ë”©)**  
- **DAOì—ì„œ ì§ì ‘ DB ì ‘ê·¼ ë° ë¡œì§ ì²˜ë¦¬**

---

## **âœ… ìš”ì•½**
ì´ì œ **JSFì˜ ManagedBeanì´ DAOë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì—¬ DBì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ í™”ë©´ì— ì¶œë ¥**í•˜ëŠ” ë°©ì‹ì´ë¯€ë¡œ, ê¸°ì¡´ì˜ **MVC(3-tier)ë³´ë‹¤ëŠ” JSP(Model 2)ì™€ ìœ ì‚¬í•œ í˜•íƒœ**ê°€ ë©ë‹ˆë‹¤.  

ì´ ë°©ì‹ìœ¼ë¡œ í”„ë¡œí† íƒ€ì…ì„ ê°œë°œí•˜ë©´, ê¸°ì¡´ ì‹œìŠ¤í…œì˜ ì–´ëŠ ë¶€ë¶„ì„ ìœ ì§€í•  ìˆ˜ ìˆëŠ”ì§€ì™€ ì–´ë–¤ ë¶€ë¶„ì„ ìˆ˜ì •í•´ì•¼ í•˜ëŠ”ì§€ ê²€í† í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

ì´í•´ê°€ ì•ˆ ë˜ëŠ” ë¶€ë¶„ì´ ìˆìœ¼ë©´ ì§ˆë¬¸ ì£¼ì„¸ìš”!
