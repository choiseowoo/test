### **ğŸš€ ë¡œê·¸ì¸ í™”ë©´ ì—†ì´ `index.xhtml`ì—ì„œ ìë™ìœ¼ë¡œ í¬í„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ë©´ì„œ ì„¸ì…˜ì— í† í° ë° ì •ë³´ ì €ì¥í•˜ëŠ” ë°©ë²•**

#### **âœ… 1. `index.xhtml`ì—ì„œ JavaScriptë¡œ ìë™ ì´ë™ + í† í° ìš”ì²­**
ë¡œê·¸ì¸ í™”ë©´ì´ ì—†ê¸° ë•Œë¬¸ì—, `index.xhtml`ì—ì„œ JavaScriptë¡œ í† í°ì„ ìƒì„±í•˜ê±°ë‚˜ ìš”ì²­í•œ í›„, **ì„œë²„ì— ì „ë‹¬í•˜ì—¬ ì„¸ì…˜ì— ì €ì¥**í•˜ê³ , ìë™ìœ¼ë¡œ í¬í„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ í•˜ë©´ ë¼.

```xml
<h:body onload="redirectToPortal()">
    <script>
        function redirectToPortal() {
            // 1. í† í° ìƒì„± (ì˜ˆì œ)
            let token = "default-token-" + new Date().getTime();  // ê°„ë‹¨í•œ ì˜ˆì œ í† í° ìƒì„±

            // 2. ì„œë²„ì— í† í° ì „ë‹¬í•˜ì—¬ ì„¸ì…˜ì— ì €ì¥ ìš”ì²­
            fetch('setSession.xhtml?token=' + token, {
                method: 'GET'
            }).then(response => {
                // 3. ì„¸ì…˜ ì €ì¥ í›„ í¬í„¸ í˜ì´ì§€ë¡œ ìë™ ì´ë™
                window.location.href = "portal.xhtml";
            }).catch(error => console.error("ì„¸ì…˜ ì €ì¥ ì‹¤íŒ¨", error));
        }
    </script>
</h:body>
```

---

#### **âœ… 2. `setSession.xhtml`ì—ì„œ ì„œë²„ì— í† í° ì €ì¥**
ìœ„ì—ì„œ `fetch('setSession.xhtml?token=...')`ë¥¼ í˜¸ì¶œí–ˆê¸° ë•Œë¬¸ì—, ì´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” `setSession.xhtml`ì„ ë§Œë“¤ê³ , **Managed Beanì—ì„œ í† í°ì„ ì„¸ì…˜ì— ì €ì¥**í•˜ë©´ ë¼.

##### **ğŸ“Œ `setSession.xhtml` (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¸ì¶œ)**
```xml
<f:metadata>
    <f:viewParam name="token" value="#{sessionBean.token}" />
    <f:event type="preRenderView" listener="#{sessionBean.saveToSession}" />
</f:metadata>
```

##### **ğŸ“Œ `SessionBean.java` (í† í°ì„ ì„¸ì…˜ì— ì €ì¥í•˜ëŠ” Managed Bean)**
```java
import jakarta.enterprise.context.SessionScoped;
import jakarta.inject.Named;
import jakarta.faces.context.FacesContext;
import jakarta.servlet.http.HttpSession;
import java.io.Serializable;

@Named
@SessionScoped
public class SessionBean implements Serializable {
    private String token;

    public String getToken() {
        return token;
    }

    public void setToken(String token) {
        this.token = token;
    }

    // ì„¸ì…˜ì— í† í° ì €ì¥
    public void saveToSession() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);
            session.setAttribute("USER_TOKEN", token);
            System.out.println("ì„¸ì…˜ì— í† í° ì €ì¥ ì™„ë£Œ: " + token);
        }
    }
}
```

---

#### **âœ… 3. `portal.xhtml`ì—ì„œ ì„¸ì…˜ ì •ë³´ í™•ì¸**
í¬í„¸ í˜ì´ì§€(`portal.xhtml`)ì—ì„œëŠ” ì„¸ì…˜ì— ì €ì¥ëœ í† í°ì„ ë‹¤ì‹œ ê°€ì ¸ì™€ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´.

##### **ğŸ“Œ `portal.xhtml`**
```xml
<h:body>
    <h:outputText value="ì„¸ì…˜ì— ì €ì¥ëœ í† í°: #{sessionBean.token}" />
</h:body>
```

---

### **ğŸ“Œ ì •ë¦¬**
1. **`index.xhtml`ì—ì„œ JavaScriptë¡œ í† í°ì„ ìƒì„±** â†’ `setSession.xhtml?token=...`ìœ¼ë¡œ ì „ë‹¬
2. **`setSession.xhtml`ì—ì„œ Managed Beanì´ í† í°ì„ ì„¸ì…˜ì— ì €ì¥**
3. **ì„¸ì…˜ ì •ë³´ê°€ ì €ì¥ëœ í›„ ìë™ìœ¼ë¡œ `portal.xhtml`ë¡œ ì´ë™**
4. **`portal.xhtml`ì—ì„œ ì„¸ì…˜ ê°’ì„ í™•ì¸ ê°€ëŠ¥**

ì´ë ‡ê²Œ í•˜ë©´ ë¡œê·¸ì¸ ì—†ì´ **ìë™ìœ¼ë¡œ ì„¸ì…˜ì— í† í°ì„ ì €ì¥í•˜ê³  í¬í„¸ í™”ë©´ìœ¼ë¡œ ì´ë™**í•  ìˆ˜ ìˆì–´!
