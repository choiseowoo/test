ì½”ë“œë¥¼ í™•ì¸í•´ë³´ë‹ˆ ëª‡ ê°€ì§€ ìˆ˜ì •ì´ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤. ì£¼ìš” ë¬¸ì œì™€ ê°œì„ ì ì„ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

---

### **1. `UserBean`ì˜ í˜ì´ì§• ë° ê²€ìƒ‰ ë¡œì§ ìˆ˜ì •**
#### **ë¬¸ì œì **
- `searchUsers(int currentPage)`ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ ì˜ëª»ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 
- `init()` ë©”ì„œë“œì—ì„œ `organizationList`ë¥¼ `organization`ì— í• ë‹¹í•˜ëŠ” ì½”ë“œê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.
- `display()` ë©”ì„œë“œì—ì„œ `searchUsers(currentPage)`ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤.

#### **ìˆ˜ì • ì½”ë“œ**
```java
@Named
@SessionScoped
public class UserBean implements Serializable {
    private String organization;
    private String userName;
    private String userCode;
    private String userEmail;
    private List<User> userList;
    private List<String> organizationList;  // ì¡°ì§ ëª©ë¡ ì¶”ê°€

    private int currentPage = 1;
    private int pageSize = 10;
    private int totalPages;

    private UserDAO userDAO = new UserDAO();

    @PostConstruct
    public void init() {
        userList = new ArrayList<>();
        organizationList = userDAO.getOrganizationList();  // ì¡°ì§ ëª©ë¡ ì´ˆê¸°í™”
    }

    public void display() {
        currentPage = 1;
        searchUsers();
    }

    public void searchUsers() {
        Map<String, Object> params = new HashMap<>();
        params.put("organization", organization);
        params.put("userName", userName);
        params.put("userCode", userCode);
        params.put("userEmail", userEmail);

        int totalRecords = userDAO.getTotalUserCount(params);
        totalPages = (int) Math.ceil((double) totalRecords / pageSize);
        userList = userDAO.getUsers(params, (currentPage - 1) * pageSize, pageSize);
    }

    public void goToFirstPage() {
        currentPage = 1;
        searchUsers();
    }

    public void previousPage() {
        if (currentPage > 1) {
            currentPage--;
            searchUsers();
        }
    }

    public void nextPage() {
        if (currentPage < totalPages) {
            currentPage++;
            searchUsers();
        }
    }

    public void goToLastPage() {
        currentPage = totalPages;
        searchUsers();
    }

    // Getter/Setter ìƒëµ
}
```

---

### **2. `UserDAO`ì˜ í˜ì´ì§• ì¿¼ë¦¬ ìˆ˜ì •**
#### **ë¬¸ì œì **
- `getUsers()`ì™€ `getTotalUserCount()`ì˜ íŒŒë¼ë¯¸í„°ê°€ ì˜ëª»ë¨.
- `getUsers()` ë©”ì„œë“œì—ì„œ `session.getUsers(param);`ì„ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ ì˜ëª»ë¨. (Mapper ì¸í„°í˜ì´ìŠ¤ì˜ `select` í˜¸ì¶œ í•„ìš”)
- `getTotalUserCount()`ì˜ ë¦¬í„´ íƒ€ì…ì´ `int`ì—¬ì•¼ í•¨.

#### **ìˆ˜ì • ì½”ë“œ**
```java
import java.util.List;
import java.util.Map;
import java.util.HashMap;
import org.apache.ibatis.session.SqlSession;

public class UserDAO {
    public List<User> getUsers(Map<String, Object> params, int offset, int limit) {
        try (SqlSession session = MyBatisUtil.getSqlSessionFactory().openSession()) {
            params.put("offset", offset);
            params.put("limit", limit);
            return session.selectList("com.example.mapper.UserMapper.getUsers", params);
        }
    }

    public int getTotalUserCount(Map<String, Object> params) {
        try (SqlSession session = MyBatisUtil.getSqlSessionFactory().openSession()) {
            return session.selectOne("com.example.mapper.UserMapper.getTotalUserCount", params);
        }
    }

    public List<String> getOrganizationList() {
        try (SqlSession session = MyBatisUtil.getSqlSessionFactory().openSession()) {
            return session.selectList("com.example.mapper.UserMapper.getOrganizationList");
        }
    }
}
```

---

### **3. `UserMapper.xml` í˜ì´ì§• ì¿¼ë¦¬ ìˆ˜ì •**
#### **ë¬¸ì œì **
- `LIMIT`ê³¼ `OFFSET` ìˆœì„œê°€ ì˜ëª»ë¨. (`LIMIT #{limit} OFFSET #{offset}` ìˆœì„œì—¬ì•¼ í•¨)
- `LIMIT`ê³¼ `OFFSET`ì„ íŒŒë¼ë¯¸í„°ì— ì¶”ê°€í•˜ì§€ ì•ŠìŒ.
- `resultType="com.example.model.User"`ì—ì„œ `User`ê°€ ì•„ë‹Œ `Map<String, Object>`ë¡œ ë³€ê²½ì´ í•„ìš”í•¨.

#### **ìˆ˜ì • ì½”ë“œ**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.UserMapper">

    <!-- ê²€ìƒ‰ + í˜ì´ì§• -->
    <select id="getUsers" resultType="map">
        SELECT username AS name, userid AS code, email
        FROM users
        WHERE 1=1
        <if test="organization != null and organization != ''">
            AND organization = #{organization}
        </if>
        <if test="userName != null and userName != ''">
            AND LOWER(username) LIKE CONCAT('%', LOWER(#{userName}), '%')
        </if>
        <if test="userCode != null and userCode != ''">
            AND userid = #{userCode}
        </if>
        <if test="userEmail != null and userEmail != ''">
            AND LOWER(email) LIKE CONCAT('%', LOWER(#{userEmail}), '%')
        </if>
        ORDER BY userid
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <!-- ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ -->
    <select id="getTotalUserCount" resultType="int">
        SELECT COUNT(*) FROM users
        WHERE 1=1
        <if test="organization != null and organization != ''">
            AND organization = #{organization}
        </if>
        <if test="userName != null and userName != ''">
            AND LOWER(username) LIKE CONCAT('%', LOWER(#{userName}), '%')
        </if>
        <if test="userCode != null and userCode != ''">
            AND userid = #{userCode}
        </if>
        <if test="userEmail != null and userEmail != ''">
            AND LOWER(email) LIKE CONCAT('%', LOWER(#{userEmail}), '%')
        </if>
    </select>

    <!-- ì¡°ì§ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° -->
    <select id="getOrganizationList" resultType="string">
        SELECT DISTINCT organization FROM users ORDER BY organization
    </select>

</mapper>
```

---

### **4. `search.xhtml` ìˆ˜ì •**
#### **ë¬¸ì œì **
- `update="searchForm"`ì„ ì‚¬ìš©í•  ê²½ìš° í…Œì´ë¸”ì´ ê°±ì‹ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.  
- `<h:panelGroup>`ì˜ `render` ì†ì„±ì´ `h:panelGroup`ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠìŒ.

#### **ìˆ˜ì • ì½”ë“œ**
```xhtml
<h:form id="searchForm">
    <!-- ê²€ìƒ‰ ì¡°ê±´ -->
    <h:panelGrid columns="4">
        <h:outputLabel for="organization" value="ì¡°ì§: " />
        <h:selectOneMenu id="organization" value="#{userBean.organization}">
            <f:selectItem itemLabel="ì „ì²´" itemValue="" />
            <f:selectItems value="#{userBean.organizationList}" />
        </h:selectOneMenu>

        <h:outputLabel for="userName" value="ì´ë¦„: " />
        <h:inputText id="userName" value="#{userBean.userName}" />

        <h:outputLabel for="userCode" value="ì½”ë“œ: " />
        <h:inputText id="userCode" value="#{userBean.userCode}" />

        <h:outputLabel for="userEmail" value="ì´ë©”ì¼: " />
        <h:inputText id="userEmail" value="#{userBean.userEmail}" />

        <h:commandButton value="ê²€ìƒ‰" action="#{userBean.display}" update="userTable, paginationPanel" />
    </h:panelGrid>

    <!-- í˜ì´ì§• ì»¨íŠ¸ë¡¤ ë° ê²°ê³¼ -->
    <h:panelGroup id="paginationPanel" rendered="#{not empty userBean.userList}">
        <h:commandButton value="<<" action="#{userBean.goToFirstPage}" disabled="#{userBean.currentPage == 1}" update="userTable, paginationPanel" />
        <h:commandButton value="<" action="#{userBean.previousPage}" disabled="#{userBean.currentPage == 1}" update="userTable, paginationPanel" />
        <h:outputText value="í˜ì´ì§€ #{userBean.currentPage} / #{userBean.totalPages}" />
        <h:commandButton value=">" action="#{userBean.nextPage}" disabled="#{userBean.currentPage == userBean.totalPages}" update="userTable, paginationPanel" />
        <h:commandButton value=">>" action="#{userBean.goToLastPage}" disabled="#{userBean.currentPage == userBean.totalPages}" update="userTable, paginationPanel" />
        
        <h:dataTable id="userTable" value="#{userBean.userList}" var="user">
            <h:column><f:facet name="header">ì´ë¦„</f:facet>#{user.name}</h:column>
            <h:column><f:facet name="header">ì½”ë“œ</f:facet>#{user.code}</h:column>
            <h:column><f:facet name="header">ì´ë©”ì¼</f:facet>#{user.email}</h:column>
        </h:dataTable>
    </h:panelGroup>
</h:form>
```

ì´ì œ ìˆ˜ì •ëœ ì½”ë“œë¡œ ê²€ìƒ‰ê³¼ í˜ì´ì§•ì´ ì •ìƒ ë™ì‘í•  ê²ƒì…ë‹ˆë‹¤. ğŸš€
