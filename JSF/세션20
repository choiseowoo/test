í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë¡œê·¸ì¸ ì—†ì´ `index.xhtml`ì—ì„œ `xxxx01.xhtml`ë¡œ ìë™ ì´ë™í•˜ëŠ” ê²½ìš°, `SESSIONKEY_SESSION` ê°’ì„ í•˜ë“œì½”ë”©í•´ì„œ ì„¸ì…˜ì— ì €ì¥í•˜ë ¤ë©´ **JSFì˜ `preRenderView` ì´ë²¤íŠ¸ë¥¼ í™œìš©**í•˜ê±°ë‚˜, **JSì—ì„œ ì§ì ‘ ì„¸ì…˜ ê°’ì„ ì„¤ì •**í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.  

---

### **ğŸ“Œ ë°©ë²• 1: JSFì—ì„œ `preRenderView` ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•´ ì„¸ì…˜ ê°’ ì„¤ì •**
`index.xhtml`ì—ì„œ `preRenderView` ì´ë²¤íŠ¸ë¥¼ í™œìš©í•´ ì„¸ì…˜ ê°’ì„ ì €ì¥í•˜ê³ , ì´í›„ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### âœ… **1) `SessionManager` í´ë˜ìŠ¤ ìƒì„±** (ì„¸ì…˜ ê°’ ì €ì¥/ì¡°íšŒ)
```java
import jakarta.faces.context.FacesContext;
import jakarta.servlet.http.HttpSession;
import java.util.HashMap;
import java.util.Map;

public class SessionManager {
    private static final String SESSIONKEY_SESSION = "framework.session";

    // ì„¸ì…˜ì— í•˜ë“œì½”ë”©ëœ ê°’ ì €ì¥
    public static void saveToSession() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);

            Map<String, Object> sessionData = new HashMap<>();
            sessionData.put("USER_TOKEN", "testToken");
            sessionData.put("USER_ID", "testUser");
            sessionData.put("USER_ROLE", "admin");

            session.setAttribute(SESSIONKEY_SESSION, sessionData);
            System.out.println("ì„¸ì…˜ ì €ì¥ ì™„ë£Œ: " + sessionData);
        }
    }

    // ì„¸ì…˜ì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°
    public static Map<String, Object> getSessionData() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
            if (session != null) {
                return (Map<String, Object>) session.getAttribute(SESSIONKEY_SESSION);
            }
        }
        return null;
    }
}
```

---

#### âœ… **2) `index.xhtml`ì—ì„œ `preRenderView`ë¡œ ì„¸ì…˜ ì„¤ì • í›„ í˜ì´ì§€ ì´ë™**
```xml
<f:metadata>
    <f:event type="preRenderView" listener="#{sessionBean.saveToSession}" />
</f:metadata>

<h:body>
    <h:outputScript>
        window.onload = function() {
            window.location.href = 'xxxx01.xhtml';
        };
    </h:outputScript>
</h:body>
```
âœ… **ì„¤ëª…**  
- `<f:metadata>` ì•ˆì—ì„œ **`preRenderView` ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ `saveToSession()`ì„ ì‹¤í–‰**  
  â†’ ì¦‰, `index.xhtml`ì´ ë Œë”ë§ë˜ê¸° ì „ì— **ì„¸ì…˜ ê°’ì´ ìë™ìœ¼ë¡œ ì €ì¥ë¨**  
- ê·¸ í›„ **JavaScriptì˜ `window.onload` ì´ë²¤íŠ¸ì—ì„œ `xxxx01.xhtml`ë¡œ ì´ë™**  
- ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ **ë‹¤ìŒ í˜ì´ì§€(`xxxx01.xhtml`)ì—ì„œë„ ì„¸ì…˜ì— ì €ì¥ëœ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ**.

---

### **ğŸ“Œ ë°©ë²• 2: JavaScriptë¡œ ì„¸ì…˜ ê°’ì„ ì„¤ì • (ë¹„ì¶”ì²œ)**
JavaScriptì—ì„œëŠ” **ì„œë²„ ì„¸ì…˜(`HttpSession`)ì„ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ì—†ì§€ë§Œ**, **AJAXë¥¼ ì‚¬ìš©í•´ ì„œë¸”ë¦¿ì„ í˜¸ì¶œí•˜ì—¬ ì„¸ì…˜ ê°’ì„ ì„¤ì •**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
(ë‹¨, ì„œë²„ ì¸¡ ì½”ë“œê°€ í•„ìš”í•¨)

#### âœ… **1) ì„¸ì…˜ ê°’ì„ ì„¤ì •í•˜ëŠ” ì„œë¸”ë¦¿ (`SetSessionServlet.java`) ì¶”ê°€**
```java
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

public class SetSessionServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        HttpSession session = request.getSession(true);

        Map<String, Object> sessionData = new HashMap<>();
        sessionData.put("USER_TOKEN", "testToken");
        sessionData.put("USER_ID", "testUser");
        sessionData.put("USER_ROLE", "admin");

        session.setAttribute("framework.session", sessionData);
        response.getWriter().write("Session set successfully");
    }
}
```
âœ… **ì„¤ëª…**  
- `/setSession` ê²½ë¡œë¡œ AJAX ìš”ì²­ì„ ë³´ë‚´ë©´ **ì„œë²„ì—ì„œ ì„¸ì…˜ ê°’ì„ ì €ì¥**í•˜ëŠ” ì„œë¸”ë¦¿  
- ì´í›„ í˜ì´ì§€(`xxxx01.xhtml`)ì—ì„œë„ ì„¸ì…˜ ê°’ ì‚¬ìš© ê°€ëŠ¥  

---

#### âœ… **2) JavaScriptì—ì„œ AJAXë¡œ ì„¸ì…˜ ê°’ ì„¤ì • í›„ í˜ì´ì§€ ì´ë™**
```xml
<h:outputScript>
    window.onload = function() {
        fetch('setSession', { method: 'GET' })
            .then(response => response.text())
            .then(data => {
                console.log(data);
                window.location.href = 'xxxx01.xhtml';
            })
            .catch(error => console.error('Error:', error));
    };
</h:outputScript>
```
âœ… **ì„¤ëª…**  
- **AJAXë¥¼ ì´ìš©í•´ `/setSession` ìš”ì²­**ì„ ë³´ëƒ„  
- **ì„œë²„ì—ì„œ ì„¸ì…˜ ê°’ì„ ì„¤ì •í•œ í›„ `xxxx01.xhtml`ë¡œ ì´ë™**  
- ì´ ë°©ë²•ì€ `Servlet`ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— **JSFë§Œìœ¼ë¡œ í•´ê²°í•˜ëŠ” ê²ƒë³´ë‹¤ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆìŒ**.

---

### **ğŸ“Œ ê²°ë¡ **
âœ… **í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•**  
â˜‘ï¸ **JSFì˜ `preRenderView`ì—ì„œ `saveToSession()` ì‹¤í–‰ í›„ í˜ì´ì§€ ì´ë™í•˜ëŠ” ë°©ë²•**  
â˜‘ï¸ **JavaScriptì—ì„œ `window.location.href = 'xxxx01.xhtml'`ë¡œ ìë™ ì´ë™**  
â˜‘ï¸ **ë‹¤ìŒ í˜ì´ì§€ì—ì„œë„ `SESSIONKEY_SESSION` ê°’ì„ ì‚¬ìš© ê°€ëŠ¥**  

ì´ì œ `xxxx01.xhtml`ì—ì„œë„ ì•„ë˜ì²˜ëŸ¼ ì„¸ì…˜ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```java
Map<String, Object> sessionData = SessionManager.getSessionData();
System.out.println("ì„¸ì…˜ ë°ì´í„°: " + sessionData);
```

ì´ ë°©ì‹ì´ ê°€ì¥ í¸ë¦¬í•˜ë©´ì„œë„ ì¶”ê°€ì ì¸ ì„œë¸”ë¦¿ì´ í•„ìš” ì—†ì–´ì„œ ì¶”ì²œë©ë‹ˆë‹¤!
