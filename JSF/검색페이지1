**JSF + MyBatis í™˜ê²½ì—ì„œ ìœ ì € ê²€ìƒ‰ ì‹œ, ê²€ìƒ‰ ê²°ê³¼ì— ë”°ë¼ íŠ¹ì • ê°’ì„ ë¦¬í„´í•˜ë©´ì„œ ì´ ê²€ìƒ‰ ê±´ìˆ˜ë¥¼ í•¨ê»˜ ë°˜í™˜í•˜ëŠ” ë°©ë²•**ì„ ì„¤ëª…í• ê²Œ.  

---

## **ğŸ“Œ ìš”êµ¬ ì‚¬í•­ ì •ë¦¬**
1. ê²€ìƒ‰ ê²°ê³¼ê°€ **30ê±´ì„ ì´ˆê³¼í•˜ë©´ "2" ë¦¬í„´**  
2. ê²€ìƒ‰ ê²°ê³¼ê°€ **0ê±´ì´ë©´ "1" ë¦¬í„´**  
3. **ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ë˜ë©´ "0" ë¦¬í„´**  
4. **ì´ ê²€ìƒ‰ ê±´ìˆ˜ë„ í•¨ê»˜ ë°˜í™˜**  

---

## **âœ… 1. MyBatis Mapper ì„¤ì • (`UserMapper.xml`)**
ê²€ìƒ‰ ê²°ê³¼ì˜ ì´ ê°œìˆ˜ë¥¼ ì¡°íšŒí•˜ëŠ” SQLì„ ì‘ì„±í•´ì•¼ í•¨.  
```xml
<select id="searchUsersCount" resultType="int">
    SELECT COUNT(*) 
    FROM users 
    WHERE username LIKE #{username} 
</select>

<select id="searchUsers" resultType="User">
    SELECT * 
    FROM users 
    WHERE username LIKE #{username}
    LIMIT #{limit} OFFSET #{offset}
</select>
```
---

## **âœ… 2. MyBatis ì¸í„°í˜ì´ìŠ¤ (`UserMapper.java`)**
```java
public interface UserMapper {
    int searchUsersCount(@Param("username") String username);
    List<User> searchUsers(@Param("username") String username, 
                           @Param("limit") int limit, 
                           @Param("offset") int offset);
}
```
---

## **âœ… 3. ì„œë¹„ìŠ¤ ë¡œì§ (`UserService.java`)**
```java
public class UserService {
    @Inject
    private UserMapper userMapper; 

    public Map<String, Object> searchUsers(String username, int page, int pageSize) {
        Map<String, Object> result = new HashMap<>();

        int totalCount = userMapper.searchUsersCount(username);
        int offset = (page - 1) * pageSize;
        
        List<User> users = userMapper.searchUsers(username, pageSize, offset);

        // ë¦¬í„´ê°’ ì„¤ì •
        String status;
        if (totalCount == 0) {
            status = "1";  // ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ
        } else if (totalCount > 30) {
            status = "2";  // 30ê±´ ì´ˆê³¼
        } else {
            status = "0";  // ì •ìƒ ê²€ìƒ‰
        }

        // ê²°ê³¼ ì €ì¥
        result.put("status", status);
        result.put("totalCount", totalCount);
        result.put("users", users);

        return result;
    }
}
```
---

## **âœ… 4. JSF Managed Bean (`UserBean.java`)**
```java
@ManagedBean
@ViewScoped
public class UserBean {
    @Inject
    private UserService userService;

    private String searchKeyword;
    private List<User> userList;
    private int totalCount;
    private String searchStatus;

    public void search() {
        Map<String, Object> result = userService.searchUsers(searchKeyword, 1, 30);
        
        this.userList = (List<User>) result.get("users");
        this.totalCount = (int) result.get("totalCount");
        this.searchStatus = (String) result.get("status");
    }

    // Getter & Setter
}
```
---

## **âœ… 5. JSF XHTML (`userSearch.xhtml`)**
```xml
<h:form>
    <h:inputText value="#{userBean.searchKeyword}" />
    <h:commandButton value="ê²€ìƒ‰" action="#{userBean.search}" />

    <h:outputText value="ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ" rendered="#{userBean.searchStatus eq '1'}" />
    <h:outputText value="30ê±´ ì´ìƒ ê²€ìƒ‰ë¨" rendered="#{userBean.searchStatus eq '2'}" />
    <h:outputText value="ì´ ê²€ìƒ‰ ê±´ìˆ˜: #{userBean.totalCount}" />

    <h:dataTable value="#{userBean.userList}" var="user">
        <h:column>
            <f:facet name="header">ID</f:facet>
            #{user.id}
        </h:column>
        <h:column>
            <f:facet name="header">ì´ë¦„</f:facet>
            #{user.name}
        </h:column>
    </h:dataTable>
</h:form>
```
---

## **âœ… ê²°ë¡ **
- `UserService`ì—ì„œ ê²€ìƒ‰ ê²°ê³¼ ìˆ˜ë¥¼ ì¡°íšŒí•˜ê³ , ê²€ìƒ‰ ìƒíƒœ (`"0"`, `"1"`, `"2"`)ë¥¼ ê²°ì •  
- ê²€ìƒ‰ ìƒíƒœ (`searchStatus`), ì´ ê²€ìƒ‰ ê±´ìˆ˜ (`totalCount`), ê²€ìƒ‰ ê²°ê³¼ (`userList`)ë¥¼ JSFë¡œ ì „ë‹¬  
- JSF í™”ë©´ì—ì„œ `rendered` ì†ì„±ì„ í™œìš©í•˜ì—¬ ê²€ìƒ‰ ìƒíƒœì— ë”°ë¼ ë©”ì‹œì§€ë¥¼ ì¶œë ¥  

ì´ë ‡ê²Œ í•˜ë©´ **ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ì— ë”°ë¼ ì ì ˆí•œ ìƒíƒœê°’ì„ ë¦¬í„´í•˜ë©´ì„œ ì´ ê²€ìƒ‰ ê±´ìˆ˜ë„ í•¨ê»˜ ì œê³µ ê°€ëŠ¥**!
