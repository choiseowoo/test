ê²€ìƒ‰ í™”ë©´ì—ì„œ **í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸(ì•„ì´ë””)**, **ì´ë¦„ ì…ë ¥ë€**, **ì´ë©”ì¼ ì…ë ¥ë€**ì„ ì‚¬ìš©í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ì˜ˆì œ ì½”ë“œë¥¼ ì‘ì„±í•´ë³¼ê²Œ.  

## âœ… **ê¸°ëŠ¥ ì„¤ëª…**
1. **í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ (`h:selectOneMenu`)**: ì•„ì´ë”” ì„ íƒ  
2. **ì…ë ¥ í•„ë“œ (`h:inputText`)**: ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰  
3. **ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ ê²°ê³¼ ì¶œë ¥ (`h:dataTable`)**  

---

# **âœ… 1. JSF ê²€ìƒ‰ í™”ë©´ (`search.xhtml`)**
```xml
<h:form>
    <h:panelGrid columns="2">
        <h:outputLabel for="userId" value="ì•„ì´ë””" />
        <h:selectOneMenu id="userId" value="#{userBean.searchId}">
            <f:selectItem itemLabel="-- ì„ íƒ --" itemValue="" />
            <f:selectItems value="#{userBean.userIdList}" var="id" itemValue="#{id}" itemLabel="#{id}" />
        </h:selectOneMenu>

        <h:outputLabel for="name" value="ì´ë¦„" />
        <h:inputText id="name" value="#{userBean.searchName}" />

        <h:outputLabel for="email" value="ì´ë©”ì¼" />
        <h:inputText id="email" value="#{userBean.searchEmail}" />

        <h:commandButton value="ê²€ìƒ‰" action="#{userBean.searchUsers}" />
        <h:commandButton value="ì´ˆê¸°í™”" action="#{userBean.clearSearch}" />
    </h:panelGrid>

    <h:dataTable value="#{userBean.users}" var="user" border="1">
        <h:column>
            <f:facet name="header">ì•„ì´ë””</f:facet>
            #{user.id}
        </h:column>
        <h:column>
            <f:facet name="header">ì´ë¦„</f:facet>
            #{user.name}
        </h:column>
        <h:column>
            <f:facet name="header">ì´ë©”ì¼</f:facet>
            #{user.email}
        </h:column>
    </h:dataTable>
</h:form>
```
### ğŸ”¹ **JSF í™”ë©´ ì„¤ëª…**
- `h:selectOneMenu`: IDë¥¼ ì„ íƒí•˜ëŠ” í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸  
- `h:inputText`: ì´ë¦„, ì´ë©”ì¼ ì…ë ¥ í•„ë“œ  
- `h:dataTable`: ê²€ìƒ‰ ê²°ê³¼ ì¶œë ¥  
- ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ **`userBean.searchUsers()` ì‹¤í–‰**  

---

# **âœ… 2. Managed Bean (`UserBean.java`)**
```java
@Named
@SessionScoped
public class UserBean implements Serializable {
    private String searchId;
    private String searchName;
    private String searchEmail;
    private List<User> users = new ArrayList<>();
    private List<String> userIdList = new ArrayList<>();
    private final UserDAO userDAO = new UserDAO();

    @PostConstruct
    public void init() {
        userIdList = userDAO.getAllUserIds(); // í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ìš© ID ëª©ë¡
    }

    public String getSearchId() { return searchId; }
    public void setSearchId(String searchId) { this.searchId = searchId; }
    public String getSearchName() { return searchName; }
    public void setSearchName(String searchName) { this.searchName = searchName; }
    public String getSearchEmail() { return searchEmail; }
    public void setSearchEmail(String searchEmail) { this.searchEmail = searchEmail; }
    public List<User> getUsers() { return users; }
    public List<String> getUserIdList() { return userIdList; }

    public void searchUsers() {
        users = userDAO.searchUsers(searchId, searchName, searchEmail);
    }

    public void clearSearch() {
        searchId = "";
        searchName = "";
        searchEmail = "";
        users.clear();
    }
}
```
### ğŸ”¹ **ì„¤ëª…**
- **`userIdList`**: í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œí•  ID ëª©ë¡ ì €ì¥  
- **`searchUsers()`**: DAOë¥¼ í˜¸ì¶œí•´ì„œ ê²€ìƒ‰ ì‹¤í–‰  
- **`clearSearch()`**: ê²€ìƒ‰ í•„ë“œ ì´ˆê¸°í™”  

---

# **âœ… 3. DAO (`UserDAO.java`)**
```java
public class UserDAO {
    public List<String> getAllUserIds() {
        try (SqlSession session = MyBatisUtil.getSession()) {
            return session.selectList("UserMapper.getAllUserIds");
        }
    }

    public List<User> searchUsers(String id, String name, String email) {
        try (SqlSession session = MyBatisUtil.getSession()) {
            Map<String, Object> params = new HashMap<>();
            params.put("id", id.isEmpty() ? null : id);
            params.put("name", name.isEmpty() ? null : "%" + name + "%");
            params.put("email", email.isEmpty() ? null : "%" + email + "%");
            return session.selectList("UserMapper.searchUsers", params);
        }
    }
}
```
### ğŸ”¹ **ì„¤ëª…**
- **`getAllUserIds()`**: ëª¨ë“  ì‚¬ìš©ì IDë¥¼ ê°€ì ¸ì˜´ (í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ìš©)  
- **`searchUsers()`**: ID, ì´ë¦„, ì´ë©”ì¼ì„ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰  

---

# **âœ… 4. MyBatis Mapper (`UserMapper.xml`)**
```xml
<select id="getAllUserIds" resultType="string">
    SELECT id FROM users ORDER BY id
</select>

<select id="searchUsers" parameterType="map" resultType="User">
    SELECT id, name, email FROM users
    WHERE (#{id} IS NULL OR id = #{id})
    AND (#{name} IS NULL OR name LIKE #{name})
    AND (#{email} IS NULL OR email LIKE #{email})
</select>
```
### ğŸ”¹ **ì„¤ëª…**
- `getAllUserIds`: **ì‚¬ìš©ì ID ëª©ë¡ ì¡°íšŒ (í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ìš©)**  
- `searchUsers`: **ID, ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰ ì¿¼ë¦¬**  
  - ê°’ì´ ë¹„ì–´ìˆìœ¼ë©´ **NULL ì²˜ë¦¬**í•˜ì—¬ ê²€ìƒ‰ ì¡°ê±´ì—ì„œ ì œì™¸  

---

# **âœ… 5. DTO (`User.java`)**
```java
public class User {
    private String id;
    private String name;
    private String email;

    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
}
```
- **DB ê²°ê³¼ë¥¼ ë‹´ì„ DTO í´ë˜ìŠ¤**  

---

# **âœ… ì •ë¦¬**
âœ… **JSF (`search.xhtml`)**  
- `h:selectOneMenu`: ID ì„ íƒ  
- `h:inputText`: ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰  
- `h:dataTable`: ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ  

âœ… **Managed Bean (`UserBean.java`)**  
- `userIdList`: í’€ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ ë°ì´í„° ì €ì¥  
- `searchUsers()`: DAO í˜¸ì¶œ â†’ ê²€ìƒ‰ ì‹¤í–‰  

âœ… **DAO (`UserDAO.java`)**  
- `getAllUserIds()`: ID ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ  
- `searchUsers()`: ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ë°ì´í„° ì¡°íšŒ  

âœ… **MyBatis (`UserMapper.xml`)**  
- `getAllUserIds`: ID ëª©ë¡ ì¡°íšŒ  
- `searchUsers`: **ID, ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰ (ì¡°ê±´ì´ NULLì´ë©´ ì œì™¸)**  

ì´ì œ ê²€ìƒ‰ í™”ë©´ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ê±°ì•¼!  
ê¶ê¸ˆí•œ ì  ìˆìœ¼ë©´ ì§ˆë¬¸í•´ì¤˜ ğŸš€ğŸ˜Š
