### **ğŸ”¥ JSF + MyBatis ê²€ìƒ‰ ê¸°ëŠ¥ (ê²€ìƒ‰ ì¡°ê±´ 4ê°œ, í˜ì´ì§• í¬í•¨, ìƒíƒœ ì½”ë“œ ë°˜í™˜) ì™„ì„± ì½”ë“œ**  

#### **âœ… êµ¬í˜„ ìš”êµ¬ì‚¬í•­**  
1. ê²€ìƒ‰ ì¡°ê±´ 4ê°œ (ì˜ˆ: `username`, `email`, `organization`, `role`)  
2. í˜ì´ì§• ê¸°ëŠ¥ í¬í•¨ (`page`, `pageSize`)  
3. ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ ë°˜í™˜  
4. ìƒíƒœ ì½”ë“œ ë°˜í™˜ (`1=ì •ìƒ`, `0=ì˜¤ë¥˜`, `2=ê²€ìƒ‰ ì§€ì—°`, `3=0ê±´`, `4=100ê±´ ì´ˆê³¼`)  
5. JSFì—ì„œ ìƒíƒœ ì½”ë“œ ë° ê²€ìƒ‰ ê²°ê³¼ ì¶œë ¥  

---

## **1ï¸âƒ£ MyBatis Mapper (SQL ì •ì˜)**
ğŸ“Œ **í˜ì´ì§•ì„ ìœ„í•´ `LIMIT`ê³¼ `OFFSET`ì„ ì‚¬ìš©**  
```xml
<mapper namespace="com.example.mapper.UserMapper">

    <!-- ê²€ìƒ‰ ì¿¼ë¦¬ -->
    <select id="searchUsers" resultType="com.example.model.User">
        SELECT * FROM users
        WHERE 1=1
        <if test="username != null and username != ''">
            AND username LIKE CONCAT('%', #{username}, '%')
        </if>
        <if test="email != null and email != ''">
            AND email LIKE CONCAT('%', #{email}, '%')
        </if>
        <if test="organization != null and organization != ''">
            AND organization = #{organization}
        </if>
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
        ORDER BY id DESC
        LIMIT #{pageSize} OFFSET #{offset}
    </select>

    <!-- ì „ì²´ ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ ì¡°íšŒ -->
    <select id="countUsers" resultType="int">
        SELECT COUNT(*) FROM users
        WHERE 1=1
        <if test="username != null and username != ''">
            AND username LIKE CONCAT('%', #{username}, '%')
        </if>
        <if test="email != null and email != ''">
            AND email LIKE CONCAT('%', #{email}, '%')
        </if>
        <if test="organization != null and organization != ''">
            AND organization = #{organization}
        </if>
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
    </select>

</mapper>
```

---

## **2ï¸âƒ£ ê²€ìƒ‰ ì„œë¹„ìŠ¤ (MyBatis + ê²€ìƒ‰ ìƒíƒœ ì½”ë“œ)**
```java
@Service
public class UserService {

    @Autowired
    private UserMapper userMapper;

    public SearchResult searchUsers(SearchCriteria criteria) {
        SearchResult result = new SearchResult();

        try {
            long startTime = System.currentTimeMillis();

            // âœ… ì „ì²´ ê²€ìƒ‰ ê°œìˆ˜ ì¡°íšŒ
            int totalRecords = userMapper.countUsers(criteria);
            result.setTotalRecords(totalRecords);

            // âœ… ê²€ìƒ‰ ìƒíƒœ ì½”ë“œ ì²˜ë¦¬
            if (totalRecords == 0) {
                result.setStatusCode(3); // ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ
                return result;
            }
            if (totalRecords > 100) {
                result.setStatusCode(4); // ê²€ìƒ‰ ê²°ê³¼ 100ê±´ ì´ˆê³¼
                return result;
            }

            // âœ… ê²€ìƒ‰ ì‹¤í–‰ (í˜ì´ì§• ì²˜ë¦¬)
            int offset = (criteria.getPage() - 1) * criteria.getPageSize();
            criteria.setOffset(offset);
            List<User> users = userMapper.searchUsers(criteria);
            result.setUsers(users);

            long endTime = System.currentTimeMillis();
            long executionTime = endTime - startTime;

            // âœ… ê²€ìƒ‰ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ê²½ìš° (5ì´ˆ ì´ˆê³¼)
            if (executionTime > 5000) {
                result.setStatusCode(2);
                return result;
            }

            result.setStatusCode(1); // ì •ìƒ ê²€ìƒ‰ ì™„ë£Œ
            return result;

        } catch (Exception e) {
            result.setStatusCode(0); // ë¹„ì •ìƒì  ì˜¤ë¥˜ ë°œìƒ
            return result;
        }
    }
}
```

---

## **3ï¸âƒ£ ê²€ìƒ‰ ìš”ì²­ì„ ìœ„í•œ DTO (SearchCriteria, SearchResult)**
```java
@Data
public class SearchCriteria {
    private String username;
    private String email;
    private String organization;
    private String role;
    private int page;
    private int pageSize;
    private int offset; // MyBatis í˜ì´ì§• ì²˜ë¦¬
}

@Data
public class SearchResult {
    private int statusCode;
    private int totalRecords;
    private List<User> users;
}
```

---

## **4ï¸âƒ£ JSF Bean (ê²€ìƒ‰ ê²°ê³¼ ì²˜ë¦¬)**
```java
@ManagedBean
@ViewScoped
public class UserSearchBean {
    @EJB
    private UserService userService;

    private SearchCriteria criteria = new SearchCriteria();
    private SearchResult searchResult;

    public void search() {
        searchResult = userService.searchUsers(criteria);

        // âœ… ìƒíƒœ ì½”ë“œì— ë”°ë¥¸ ë©”ì‹œì§€ ì¶œë ¥
        switch (searchResult.getStatusCode()) {
            case 1:
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("ê²€ìƒ‰ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."));
                break;
            case 0:
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("ê²€ìƒ‰ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."));
                break;
            case 2:
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("ê²€ìƒ‰ ì‹œê°„ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤."));
                break;
            case 3:
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."));
                break;
            case 4:
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("ê²€ìƒ‰ ê²°ê³¼ê°€ 100ê±´ì„ ì´ˆê³¼í•©ë‹ˆë‹¤. ì¡°ê±´ì„ ì¡°ì •í•˜ì„¸ìš”."));
                break;
        }
    }

    // âœ… GETTERS & SETTERS
    public SearchCriteria getCriteria() { return criteria; }
    public void setCriteria(SearchCriteria criteria) { this.criteria = criteria; }
    public SearchResult getSearchResult() { return searchResult; }
}
```

---

## **5ï¸âƒ£ JSF í˜ì´ì§€ (`search.xhtml`)**
```xml
<h:form>
    <h:panelGrid columns="2">
        <h:outputLabel for="username" value="ì‚¬ìš©ìëª…:" />
        <h:inputText id="username" value="#{userSearchBean.criteria.username}" />

        <h:outputLabel for="email" value="ì´ë©”ì¼:" />
        <h:inputText id="email" value="#{userSearchBean.criteria.email}" />

        <h:outputLabel for="organization" value="ì¡°ì§:" />
        <h:inputText id="organization" value="#{userSearchBean.criteria.organization}" />

        <h:outputLabel for="role" value="ì—­í• :" />
        <h:inputText id="role" value="#{userSearchBean.criteria.role}" />

        <h:outputLabel for="page" value="í˜ì´ì§€:" />
        <h:inputText id="page" value="#{userSearchBean.criteria.page}" />

        <h:outputLabel for="pageSize" value="í˜ì´ì§€ í¬ê¸°:" />
        <h:inputText id="pageSize" value="#{userSearchBean.criteria.pageSize}" />
    </h:panelGrid>

    <h:commandButton value="ê²€ìƒ‰" action="#{userSearchBean.search}" />

    <!-- ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ -->
    <h:dataTable value="#{userSearchBean.searchResult.users}" var="user">
        <h:column>
            <f:facet name="header">ID</f:facet>
            #{user.id}
        </h:column>
        <h:column>
            <f:facet name="header">ì‚¬ìš©ìëª…</f:facet>
            #{user.username}
        </h:column>
        <h:column>
            <f:facet name="header">ì´ë©”ì¼</f:facet>
            #{user.email}
        </h:column>
        <h:column>
            <f:facet name="header">ì¡°ì§</f:facet>
            #{user.organization}
        </h:column>
    </h:dataTable>
</h:form>
```

---

## **âœ… ì •ë¦¬ (JSF + MyBatis ê²€ìƒ‰ ìƒíƒœ ì½”ë“œ ì ìš©)**
1. **MyBatisì—ì„œ ê²€ìƒ‰ ì¿¼ë¦¬ ì‹¤í–‰ (í˜ì´ì§• í¬í•¨)**
2. **MyBatisì—ì„œ ì „ì²´ ê°œìˆ˜ ì¡°íšŒ**
3. **ì¡°ê±´ì— ë§ëŠ” ìƒíƒœ ì½”ë“œ ë°˜í™˜**
4. **JSF Beanì—ì„œ ê²€ìƒ‰ ì‹¤í–‰ í›„ ê²°ê³¼ ì²˜ë¦¬**
5. **JSF í˜ì´ì§€ì—ì„œ ê²°ê³¼ ë° ìƒíƒœ ì½”ë“œ ì¶œë ¥**

---

ì´ì œ **ê²€ìƒ‰ ì¡°ê±´ 4ê°œ + í˜ì´ì§• + ìƒíƒœ ì½”ë“œ ë°˜í™˜ + JSF ì—°ë™**ì´ ëª¨ë‘ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤!  
**ì´ ë°©ì‹ìœ¼ë¡œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ê°œë°œí•˜ë©´, JSFì—ì„œ ê²€ìƒ‰ ìƒíƒœë¥¼ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
