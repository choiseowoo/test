ì§€ê¸ˆ **index.xhtml**ì´ íŠ¹ì • í¬íƒˆ í™”ë©´ìœ¼ë¡œ ìë™ ì´ë™í•˜ëŠ” êµ¬ì¡°ë¼ë©´, ì„¸ì…˜ ì •ë³´ ë° í† í° ì •ë³´ëŠ” **index.xhtmlì—ì„œ ì§ì ‘ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆê³ , ì´ë™í•˜ëŠ” í˜ì´ì§€ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆì–´**.  

### âœ… **ë°©ë²• 1: index.xhtmlì—ì„œ ì²˜ë¦¬ (ê¶Œì¥)**  
**index.xhtmlì—ì„œ ë¯¸ë¦¬ ì„¸ì…˜ ë° í† í° ì •ë³´ë¥¼ ì„¤ì •**í•˜ê³ , ì´í›„ í˜ì´ì§€ì—ì„œ ì´ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹.  
1. `index.xhtml`ì—ì„œ **JavaScriptë¡œ ì„¸ì…˜ ê°’ì„ ê°€ì ¸ì™€** ë„˜ê¸¸ ìˆ˜ë„ ìˆê³ ,  
2. **ë°±ì—”ë“œ(Managed Bean)ì—ì„œ ì„¸ì…˜ì— ê°’ì„ ë¯¸ë¦¬ ì €ì¥**í•´ë‘˜ ìˆ˜ë„ ìˆì–´.  

#### âœ” **ì˜ˆì œ (Managed Beanì—ì„œ ì„¸ì…˜ ì„¤ì •, index.xhtmlì—ì„œ ì‚¬ìš©)**  
##### ğŸ“Œ **1. Managed Bean (`SessionBean.java`)**  
```java
import jakarta.enterprise.context.SessionScoped;
import jakarta.inject.Named;
import jakarta.servlet.http.HttpSession;
import jakarta.faces.context.FacesContext;
import java.io.Serializable;

@Named
@SessionScoped
public class SessionBean implements Serializable {
    public void setTestSession() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);
        session.setAttribute("USER_ID", "testUser");
        session.setAttribute("USER_ROLE", "admin");
        session.setAttribute("REQUEST_TOKENKEY", "test-token-123");
    }

    public String getToken() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
        return (session != null) ? (String) session.getAttribute("REQUEST_TOKENKEY") : "no-token";
    }
}
```
---

##### ğŸ“Œ **2. `index.xhtml`ì—ì„œ ì„¸ì…˜ ê°’ ê°€ì ¸ì™€ì„œ ìë™ ì´ë™**  
```xhtml
<h:head>
    <script type="text/javascript">
        window.onload = function () {
            var token = "#{sessionBean.token}";  // ì„œë²„ì—ì„œ í† í° ê°’ ê°€ì ¸ì˜¤ê¸°
            var userId = "#{sessionScope.USER_ID}"; // JSF EL í‘œí˜„ì‹ìœ¼ë¡œ ì„¸ì…˜ ê°’ ê°€ì ¸ì˜¤ê¸°

            if (token !== "no-token" && userId !== "") {
                // íŠ¹ì • í¬íƒˆë¡œ ìë™ ì´ë™
                window.location.href = "https://portal.example.com?token=" + token + "&user=" + userId;
            } else {
                alert("ì„¸ì…˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }
        };
    </script>
</h:head>
<h:body>
    <h1>ìë™ ì´ë™ ì¤‘...</h1>
</h:body>
```
---

### âœ… **ë°©ë²• 2: ë‹¤ìŒ í˜ì´ì§€ì—ì„œ ì²˜ë¦¬**
ì´ë™í•  í˜ì´ì§€ì—ì„œ ì„¸ì…˜ì„ ë‹¤ì‹œ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ì•¼.  
- `index.xhtml`ì—ì„œëŠ” ê·¸ëƒ¥ `window.location.href`ë¡œ ì´ë™ë§Œ í•˜ê³ ,  
- ì´ë™í•œ í˜ì´ì§€ì—ì„œ **ë°±ì—”ë“œì—ì„œ ì„¸ì…˜ì„ ë‹¤ì‹œ í™•ì¸**í•œ í›„, í† í°ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰íŠ¸í•˜ëŠ” ë°©ì‹.

---

### **ì •ë¦¬**
- **index.xhtmlì—ì„œ JavaScriptë¡œ ì„¸ì…˜ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ìë™ ì´ë™í•˜ëŠ” ë°©ì‹**ì´ **ê°€ì¥ ê¹”ë”í•˜ê³  ë¹ ë¦„**.  
- **ì„¸ì…˜ ì„¤ì •ì€ Java(Managed Bean)ì—ì„œ í•˜ê³ , index.xhtmlì—ì„œ ê°€ì ¸ì™€ì„œ í™œìš©**í•˜ëŠ” ê²ƒì´ **ê¶Œì¥ë¨**.  
- **ì´ë™í•˜ëŠ” í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ í•œ ë²ˆ ì„¸ì…˜ ê²€ì¦í•˜ëŠ” ê²ƒë„ ë³´ì•ˆì ìœ¼ë¡œ ì¢‹ìŒ**.  

âœ” **ê²°ë¡ :**  
ì„¸ì…˜ ê°’ê³¼ í† í°ì„ **index.xhtmlì—ì„œ ì„¤ì •í•˜ê³  ì‚¬ìš©**í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ì•¼!
