**âœ… JSF + MyBatisë¡œ ê²€ìƒ‰ ê²°ê³¼ì— í˜ì´ì§• ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•**  

ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì „ì—ëŠ” í…Œì´ë¸”ì„ ìˆ¨ê¸°ê³ , ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆì„ ê²½ìš° í…Œì´ë¸”ê³¼ í˜ì´ì§• UIë¥¼ í‘œì‹œí•˜ëŠ” ë°©ì‹ì´ì•¼.  
í˜ì´ì§• ë²„íŠ¼ì€ **ë§¨ì• í˜ì´ì§€ ì´ë™, ì´ì „ í˜ì´ì§€ ì´ë™, ë‹¤ìŒ í˜ì´ì§€ ì´ë™, ë§¨ë’¤ í˜ì´ì§€ ì´ë™** 4ê°€ì§€ê°€ í¬í•¨ë¨.  

---

### **ğŸš€ 1. MyBatis `UserMapper.xml` - í˜ì´ì§• ì²˜ë¦¬ SQL**
```xml
<mapper namespace="com.example.mapper.UserMapper">
    <select id="searchUsers" resultType="User">
        SELECT * FROM users
        WHERE (#{name} IS NULL OR name LIKE CONCAT('%', #{name}, '%'))
        ORDER BY id
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <select id="countUsers" resultType="int">
        SELECT COUNT(*) FROM users
        WHERE (#{name} IS NULL OR name LIKE CONCAT('%', #{name}, '%'))
    </select>
</mapper>
```
- `LIMIT #{limit} OFFSET #{offset}`ì„ ì‚¬ìš©í•´ì„œ í˜ì´ì§• ì²˜ë¦¬  
- `countUsers`ëŠ” ì´ ë ˆì½”ë“œ ìˆ˜ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ (í˜ì´ì§• ê³„ì‚°ìš©)  

---

### **ğŸš€ 2. `UserMapper.java` (ì¸í„°í˜ì´ìŠ¤)**
```java
public interface UserMapper {
    List<User> searchUsers(@Param("name") String name, @Param("limit") int limit, @Param("offset") int offset);
    int countUsers(@Param("name") String name);
}
```

---

### **ğŸš€ 3. `UserDAO.java` - DAOì—ì„œ MyBatis í˜¸ì¶œ**
```java
public class UserDAO {
    private SqlSessionFactory sqlSessionFactory = MyBatisUtil.getSqlSessionFactory();

    public List<User> searchUsers(String name, int limit, int offset) {
        try (SqlSession session = sqlSessionFactory.openSession()) {
            UserMapper mapper = session.getMapper(UserMapper.class);
            return mapper.searchUsers(name, limit, offset);
        }
    }

    public int countUsers(String name) {
        try (SqlSession session = sqlSessionFactory.openSession()) {
            UserMapper mapper = session.getMapper(UserMapper.class);
            return mapper.countUsers(name);
        }
    }
}
```

---

### **ğŸš€ 4. `UserBean.java` - JSF Managed Beanì—ì„œ í˜ì´ì§• ì²˜ë¦¬**
```java
@ManagedBean
@ViewScoped
public class UserBean {
    private UserDAO userDAO = new UserDAO();
    private List<User> users;
    private String searchName;
    private boolean showTable = false; // ê²€ìƒ‰ ì „ì—ëŠ” í…Œì´ë¸” ë¹„í‘œì‹œ

    // í˜ì´ì§• ê´€ë ¨ ë³€ìˆ˜
    private int currentPage = 1;
    private int totalRecords;
    private int pageSize = 10; // í•œ í˜ì´ì§€ë‹¹ í‘œì‹œí•  ê°œìˆ˜

    public void search() {
        totalRecords = userDAO.countUsers(searchName);
        users = userDAO.searchUsers(searchName, pageSize, getOffset());
        showTable = true;
    }

    public void goToFirstPage() {
        currentPage = 1;
        search();
    }

    public void goToPreviousPage() {
        if (currentPage > 1) {
            currentPage--;
            search();
        }
    }

    public void goToNextPage() {
        if (currentPage < getTotalPages()) {
            currentPage++;
            search();
        }
    }

    public void goToLastPage() {
        currentPage = getTotalPages();
        search();
    }

    private int getOffset() {
        return (currentPage - 1) * pageSize;
    }

    public int getTotalPages() {
        return (int) Math.ceil((double) totalRecords / pageSize);
    }

    // Getter & Setter
    public List<User> getUsers() { return users; }
    public String getSearchName() { return searchName; }
    public void setSearchName(String searchName) { this.searchName = searchName; }
    public boolean isShowTable() { return showTable; }
    public int getCurrentPage() { return currentPage; }
    public int getTotalRecords() { return totalRecords; }
}
```

---

### **ğŸš€ 5. `userSearch.xhtml` - UI (ê²€ìƒ‰ ë° í˜ì´ì§•)**
```xml
<h:form>
    <h:panelGrid columns="2">
        <h:outputLabel for="searchName" value="ì´ë¦„ ê²€ìƒ‰: " />
        <h:inputText id="searchName" value="#{userBean.searchName}" />
    </h:panelGrid>
    
    <h:commandButton value="ê²€ìƒ‰" action="#{userBean.search}" />

    <h:panelGroup rendered="#{userBean.showTable}">
        <h:dataTable value="#{userBean.users}" var="user" border="1">
            <h:column>
                <f:facet name="header">ID</f:facet>
                #{user.id}
            </h:column>
            <h:column>
                <f:facet name="header">ì´ë¦„</f:facet>
                #{user.name}
            </h:column>
            <h:column>
                <f:facet name="header">ì´ë©”ì¼</f:facet>
                #{user.email}
            </h:column>
        </h:dataTable>

        <!-- í˜ì´ì§• ë²„íŠ¼ -->
        <h:panelGrid columns="4" style="margin-top:10px;">
            <h:commandButton value="<< ì²« í˜ì´ì§€" action="#{userBean.goToFirstPage}" disabled="#{userBean.currentPage == 1}" />
            <h:commandButton value="< ì´ì „" action="#{userBean.goToPreviousPage}" disabled="#{userBean.currentPage == 1}" />
            <h:outputText value="í˜ì´ì§€ #{userBean.currentPage} / #{userBean.totalPages}" />
            <h:commandButton value="ë‹¤ìŒ >" action="#{userBean.goToNextPage}" disabled="#{userBean.currentPage == userBean.totalPages}" />
            <h:commandButton value="ë >>" action="#{userBean.goToLastPage}" disabled="#{userBean.currentPage == userBean.totalPages}" />
        </h:panelGrid>
    </h:panelGroup>
</h:form>
```

---

### **âœ… ì •ë¦¬**
âœ” **ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì „ì—ëŠ” í…Œì´ë¸”ì´ ë³´ì´ì§€ ì•ŠìŒ (`showTable` í™œìš©)**  
âœ” **í˜ì´ì§• ë²„íŠ¼ 4ê°œ (ë§¨ì•, ì´ì „, ë‹¤ìŒ, ë§¨ë’¤) ì¶”ê°€**  
âœ” **MyBatisì—ì„œ `LIMIT`ê³¼ `OFFSET`ì„ ì‚¬ìš©í•´ í˜ì´ì§• ì²˜ë¦¬**  
âœ” **JSFì˜ `h:dataTable`ê³¼ `h:panelGrid`ë¡œ ê²°ê³¼ì™€ í˜ì´ì§• UI êµ¬ì„±**  

**ğŸ’¡ ì´ ë°©ì‹ëŒ€ë¡œ í•˜ë©´, ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆì„ ë•Œë§Œ í˜ì´ì§• UIê°€ í‘œì‹œë˜ê³ , ë™ì ìœ¼ë¡œ ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ë¨!**  
í•„ìš”í•œ ë¶€ë¶„ ìˆìœ¼ë©´ ë” ì•Œë ¤ì¤˜!
