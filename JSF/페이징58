### **ğŸ”¥ ì „ì²´ ì½”ë“œ (JSF + MyBatis ê²€ìƒ‰ + í˜ì´ì§•)**
ì´ˆê¸° í™”ë©´ì—ì„œëŠ” **ê²€ìƒ‰ ì¡°ê±´ë§Œ í‘œì‹œë˜ê³ , ë°ì´í„° í…Œì´ë¸”ì€ ë³´ì´ì§€ ì•Šë„ë¡** ìˆ˜ì •í•œ ì½”ë“œì…ë‹ˆë‹¤.  
- `init()`ì—ì„œ `userList = new ArrayList<>();` ë¡œ ì´ˆê¸°í™”  
- `searchExecuted` ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ **ê²€ìƒ‰ ì‹¤í–‰ í›„ì—ë§Œ í…Œì´ë¸”ì„ í‘œì‹œ**  
- **ê²€ìƒ‰ í›„ `totalPages`ë¥¼ ìë™ ê°±ì‹ **í•˜ì—¬ **í˜ì´ì§• ì˜¤ë¥˜ í•´ê²°**  

---

### **ğŸ“Œ 1. MyBatis XML Mapper (ê²€ìƒ‰ + í˜ì´ì§• ì¿¼ë¦¬)**

#### **UserMapper.xml**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.UserMapper">

    <!-- ê²€ìƒ‰ê³¼ í˜ì´ì§• ì ìš© -->
    <select id="searchUsers" resultType="com.example.model.User">
        SELECT * FROM users
        WHERE 1=1
        <if test="organization != null and organization != ''">
            AND organization = #{organization}
        </if>
        <if test="userName != null and userName != ''">
            AND LOWER(name) LIKE CONCAT('%', LOWER(#{userName}), '%')
        </if>
        <if test="userCode != null and userCode != ''">
            AND code = #{userCode}
        </if>
        <if test="userEmail != null and userEmail != ''">
            AND LOWER(email) LIKE CONCAT('%', LOWER(#{userEmail}), '%')
        </if>
        ORDER BY id
        LIMIT #{offset}, #{pageSize}
    </select>

    <!-- ì „ì²´ ê°œìˆ˜ ì¡°íšŒ -->
    <select id="countUsers" resultType="int">
        SELECT COUNT(*) FROM users
        WHERE 1=1
        <if test="organization != null and organization != ''">
            AND organization = #{organization}
        </if>
        <if test="userName != null and userName != ''">
            AND LOWER(name) LIKE CONCAT('%', LOWER(#{userName}), '%')
        </if>
        <if test="userCode != null and userCode != ''">
            AND code = #{userCode}
        </if>
        <if test="userEmail != null and userEmail != ''">
            AND LOWER(email) LIKE CONCAT('%', LOWER(#{userEmail}), '%')
        </if>
    </select>

</mapper>
```

---

### **ğŸ“Œ 2. UserMapper ì¸í„°í˜ì´ìŠ¤**
```java
import com.example.model.User;
import org.apache.ibatis.annotations.Param;
import java.util.List;

public interface UserMapper {
    List<User> searchUsers(@Param("organization") String organization,
                           @Param("userName") String userName,
                           @Param("userCode") String userCode,
                           @Param("userEmail") String userEmail,
                           @Param("offset") int offset,
                           @Param("pageSize") int pageSize);

    int countUsers(@Param("organization") String organization,
                   @Param("userName") String userName,
                   @Param("userCode") String userCode,
                   @Param("userEmail") String userEmail);
}
```

---

### **ğŸ“Œ 3. Java ì½”ë“œ (JSF + MyBatis ì—°ë™)**

#### **UserBean.java**
```java
import com.example.mapper.UserMapper;
import com.example.model.User;
import javax.annotation.PostConstruct;
import javax.inject.Inject;
import javax.inject.Named;
import javax.enterprise.context.SessionScoped;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

@Named
@SessionScoped
public class UserBean implements Serializable {
    @Inject
    private UserMapper userMapper;

    private List<User> userList;
    private String organization = "";
    private String userName = "";
    private String userCode = "";
    private String userEmail = "";
    private int currentPage = 1;
    private int pageSize = 10;
    private int totalPages;
    private boolean searchExecuted = false; // ê²€ìƒ‰ ì‹¤í–‰ ì—¬ë¶€

    @PostConstruct
    public void init() {
        userList = new ArrayList<>(); // ì´ˆê¸°ì—ëŠ” ë¹ˆ ë¦¬ìŠ¤íŠ¸ ìœ ì§€
    }

    public void searchUsers() {
        int offset = (currentPage - 1) * pageSize;
        userList = userMapper.searchUsers(organization, userName, userCode, userEmail, offset, pageSize);
        
        // ì „ì²´ ê°œìˆ˜ ê°±ì‹ 
        int totalRecords = userMapper.countUsers(organization, userName, userCode, userEmail);
        totalPages = (totalRecords + pageSize - 1) / pageSize;  // ë°˜ì˜¬ë¦¼ ì²˜ë¦¬
        
        // í˜ì´ì§€ ì´ˆê³¼ ë°©ì§€
        if (currentPage > totalPages) {
            currentPage = totalPages;
        }
        
        searchExecuted = !userList.isEmpty(); // ê²€ìƒ‰ ì‹¤í–‰ ì—¬ë¶€ ì²´í¬
    }

    public void goToFirstPage() { 
        currentPage = 1; 
        searchUsers(); 
    }

    public void previousPage() { 
        if (currentPage > 1) { 
            currentPage--; 
            searchUsers(); 
        } 
    }

    public void nextPage() { 
        if (currentPage < totalPages) { 
            currentPage++; 
            searchUsers(); 
        } 
    }

    public void goToLastPage() { 
        currentPage = totalPages; 
        searchUsers(); 
    }

    // Getter & Setter
    public List<User> getUserList() { return userList; }
    public int getCurrentPage() { return currentPage; }
    public int getTotalPages() { return totalPages; }
    public boolean isSearchExecuted() { return searchExecuted; } // ì¶”ê°€
}
```

---

### **ğŸ“Œ 4. JSF í˜ì´ì§€ (ê²€ìƒ‰ + í˜ì´ì§• UI)**

#### **userSearch.xhtml**
```xml
<h:form id="searchForm">
    <table>
        <tr>
            <td>ì¡°ì§:</td>
            <td>
                <h:selectOneMenu id="organization" value="#{userBean.organization}">
                    <f:selectItem itemLabel="ì „ì²´" itemValue="" />
                    <f:selectItems value="#{userBean.organizationList}" />
                </h:selectOneMenu>
            </td>
            <td>ì´ë¦„:</td>
            <td><h:inputText id="userName" value="#{userBean.userName}" /></td>
        </tr>
        <tr>
            <td>ì½”ë“œ:</td>
            <td><h:inputText id="userCode" value="#{userBean.userCode}" /></td>
            <td>ì´ë©”ì¼:</td>
            <td><h:inputText id="userEmail" value="#{userBean.userEmail}" /></td>
        </tr>
        <tr>
            <td colspan="4">
                <h:commandButton value="ê²€ìƒ‰" action="#{userBean.searchUsers}" update="searchForm" />
            </td>
        </tr>
    </table>

    <!-- ğŸ”¹ ê²€ìƒ‰ ì‹¤í–‰ í›„ì—ë§Œ í…Œì´ë¸” í‘œì‹œ -->
    <h:panelGroup rendered="#{userBean.searchExecuted}">
        <table border="1">
            <thead>
                <tr>
                    <th>ì´ë¦„</th>
                    <th>ì½”ë“œ</th>
                    <th>ì´ë©”ì¼</th>
                </tr>
            </thead>
            <tbody>
                <ui:repeat value="#{userBean.userList}" var="user">
                    <tr>
                        <td>#{user.name}</td>
                        <td>#{user.code}</td>
                        <td>#{user.email}</td>
                    </tr>
                </ui:repeat>
            </tbody>
        </table>

        <div style="text-align: center; margin-top: 10px;">
            <h:commandButton value="<<" action="#{userBean.goToFirstPage}" disabled="#{userBean.currentPage == 1}" update="searchForm" />
            <h:commandButton value="<" action="#{userBean.previousPage}" disabled="#{userBean.currentPage == 1}" update="searchForm" />
            <h:outputText value="í˜ì´ì§€ #{userBean.currentPage} / #{userBean.totalPages}" />
            <h:commandButton value=">" action="#{userBean.nextPage}" disabled="#{userBean.currentPage >= userBean.totalPages}" update="searchForm" />
            <h:commandButton value=">>" action="#{userBean.goToLastPage}" disabled="#{userBean.currentPage >= userBean.totalPages}" update="searchForm" />
        </div>
    </h:panelGroup>
</h:form>
```

---

## **ğŸš€ ìµœì¢… ì •ë¦¬**
âœ… **ì´ˆê¸°í™”ë©´ì—ì„œ ê²€ìƒ‰ ì¡°ê±´ë§Œ ë³´ì´ê³  í…Œì´ë¸” ì•ˆ ë‚˜ì˜´**  
âœ… **ê²€ìƒ‰ í›„ ë°ì´í„°ê°€ ìˆì„ ë•Œë§Œ í…Œì´ë¸” í‘œì‹œ (`searchExecuted`)**  
âœ… **í˜ì´ì§• ì‹œ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•Šê³  ì •ìƒ ë™ì‘**  
âœ… **ì¡°ê±´ ê²€ìƒ‰ í›„ í˜ì´ì§• ë™ì‘ ìœ ì§€**  

ì´ì œ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•  ê±°ì˜ˆìš”! ğŸš€
