### **ğŸš€ `SESSIONKEY_SESSION`ì— ê°’ ë„£ëŠ” ë‹¤ë¥¸ ë°©ë²• & `msSession` ê´€ë ¨ ì˜¤ë¥˜ ë¶„ì„**  

#### **ğŸ” `msSession` ê´€ë ¨ `bootstrap` ì—ëŸ¬ ì›ì¸ ë¶„ì„**
1. **ì„¸ì…˜ ê´€ë¦¬ í´ë˜ìŠ¤ (`MsSession` ê°™ì€) ì¡´ì¬ ì—¬ë¶€**  
   - ê¸°ì¡´ í”„ë¡œì íŠ¸ì—ì„œ `SESSIONKEY_SESSION`ì„ `MsSession`ì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í†µí•´ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì¼ ê°€ëŠ¥ì„±ì´ í¼.  
   - `session.getAttribute(SESSIONKEY_SESSION)`ì„ í˜¸ì¶œí•  ë•Œ, `MsSession` í´ë˜ìŠ¤ë¥¼ ì°¾ì§€ ëª»í•˜ê±°ë‚˜ ì˜ëª»ëœ ì´ˆê¸°í™”ê°€ ë˜ì–´ `bootstrap` ê´€ë ¨ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì¼ ìˆ˜ ìˆìŒ.

2. **WildFlyì˜ Bootstrap ë¬¸ì œ**
   - `bootstrap` ì—ëŸ¬ëŠ” **í´ë˜ìŠ¤ ë¡œë”©** ë˜ëŠ” **Bean ì´ˆê¸°í™” ë¬¸ì œ**ì—ì„œ ìì£¼ ë°œìƒí•¨.  
   - `MsSession`ì´ ì œëŒ€ë¡œ ë¡œë“œë˜ì§€ ì•Šê±°ë‚˜, `bootstrap` ê³¼ì •ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ.

3. **ì„¸ì…˜ í´ë˜ìŠ¤ì˜ ë³€ê²½ ë˜ëŠ” ì¬ë“±ë¡ í•„ìš”**
   - í”„ë¡œì íŠ¸ì—ì„œ `MsSession`ì´ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ëŠ”ë°, `SESSIONKEY_SESSION`ì„ ì§ì ‘ `Map` í˜•íƒœë¡œ ì €ì¥í•˜ëŠ” ë°©ì‹ê³¼ ì¶©ëŒí•  ìˆ˜ë„ ìˆìŒ.
   - ë˜ëŠ” `MsSession`ì˜ `Serializable` êµ¬í˜„ì´ ë¹ ì ¸ì„œ ì„¸ì…˜ ë³µì› ì‹œ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìŒ.

---

### **âœ… `SESSIONKEY_SESSION`ì— ê°’ ë„£ëŠ” ë‹¤ë¥¸ ë°©ë²•**  

#### **â‘  ê¸°ì¡´ì˜ `MsSession` í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•**
- `MsSession`ì´ ì„¸ì…˜ì„ ê´€ë¦¬í•œë‹¤ë©´, **ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ í™œìš©**í•˜ì—¬ `SESSIONKEY_SESSION`ì— ê°’ì„ ë„£ëŠ” ê²ƒì´ ê°€ì¥ ì•ˆì „í•¨.
- `MsSession`ì´ `Serializable`ì„ êµ¬í˜„í•˜ëŠ”ì§€ í™•ì¸ í•„ìš”.  

```java
import jakarta.faces.context.FacesContext;
import jakarta.servlet.http.HttpSession;
import java.io.Serializable;

public class MsSession implements Serializable {
    private static final long serialVersionUID = 1L;
    
    private String token;
    private String userId;
    private String userRole;

    // Getter & Setter
    public String getToken() { return token; }
    public void setToken(String token) { this.token = token; }
    
    public String getUserId() { return userId; }
    public void setUserId(String userId) { this.userId = userId; }
    
    public String getUserRole() { return userRole; }
    public void setUserRole(String userRole) { this.userRole = userRole; }

    // ì„¸ì…˜ì— ì €ì¥
    public static void saveToSession(String token, String userId, String userRole) {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);
            MsSession msSession = new MsSession();
            msSession.setToken(token);
            msSession.setUserId(userId);
            msSession.setUserRole(userRole);

            session.setAttribute("framework.session", msSession);
            System.out.println("ì„¸ì…˜ ì €ì¥ ì™„ë£Œ: " + msSession);
        }
    }

    // ì„¸ì…˜ì—ì„œ ê°€ì ¸ì˜¤ê¸°
    public static MsSession getFromSession() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
            if (session != null) {
                return (MsSession) session.getAttribute("framework.session");
            }
        }
        return null;
    }
}
```

**âœ… `MsSession` í™œìš© ë°©ì‹**
- ê¸°ì¡´ í”„ë¡œì íŠ¸ì—ì„œ `MsSession`ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, ìœ„ì²˜ëŸ¼ `SESSIONKEY_SESSION` (`framework.session`)ì— `MsSession` ê°ì²´ë¥¼ ì €ì¥.
- `saveToSession()` ë©”ì„œë“œë¥¼ í†µí•´ í† í°, ìœ ì € ì •ë³´ë¥¼ `MsSession` ê°ì²´ì— ì €ì¥í•˜ê³ , ì„¸ì…˜ì— ë“±ë¡.
- `getFromSession()`ì„ ì‚¬ìš©í•´ì„œ ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œë„ ì„¸ì…˜ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥.

---

#### **â‘¡ `Map<String, Object>` í˜•íƒœë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•**
ë§Œì•½ `MsSession`ì´ í•„ìš” ì—†ë‹¤ë©´, `Map<String, Object>`ì„ ì„¸ì…˜ì— ì§ì ‘ ì €ì¥í•˜ëŠ” ë°©ë²•ë„ ê°€ëŠ¥.

```java
import jakarta.faces.context.FacesContext;
import jakarta.servlet.http.HttpSession;
import java.util.HashMap;
import java.util.Map;

public class SessionManager {
    private static final String SESSIONKEY_SESSION = "framework.session";

    // ì„¸ì…˜ì— ê°’ ì €ì¥
    public static void saveToSession(String token, String userId, String userRole) {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);

            Map<String, Object> sessionData = (Map<String, Object>) session.getAttribute(SESSIONKEY_SESSION);
            if (sessionData == null) {
                sessionData = new HashMap<>();
            }

            sessionData.put("USER_TOKEN", token);
            sessionData.put("USER_ID", userId);
            sessionData.put("USER_ROLE", userRole);

            session.setAttribute(SESSIONKEY_SESSION, sessionData);
            System.out.println("ì„¸ì…˜ ì €ì¥ ì™„ë£Œ: " + sessionData);
        }
    }

    // ì„¸ì…˜ì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°
    public static Map<String, Object> getSessionData() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (facesContext != null) {
            HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
            if (session != null) {
                return (Map<String, Object>) session.getAttribute(SESSIONKEY_SESSION);
            }
        }
        return null;
    }
}
```

**âœ… `Map<String, Object>` ë°©ì‹**
- `SESSIONKEY_SESSION` (`framework.session`)ì— `Map<String, Object>` í˜•íƒœë¡œ ì €ì¥.
- `saveToSession()`ì„ í˜¸ì¶œí•˜ë©´ ì„¸ì…˜ì— í† í°, ìœ ì € ì •ë³´ ì €ì¥.
- `getSessionData()`ë¥¼ í˜¸ì¶œí•˜ë©´ ì„¸ì…˜ì—ì„œ í•´ë‹¹ ë°ì´í„° ê°€ì ¸ì˜´.

---

### **ğŸ’¡ í•´ê²°ì±… ì •ë¦¬**
| ë°©ë²• | ì¥ì  | ë‹¨ì  |
|------|------|------|
| `MsSession` í´ë˜ìŠ¤ í™œìš© | ê¸°ì¡´ ì½”ë“œ ìœ ì§€ ê°€ëŠ¥ | `bootstrap` ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ë””ë²„ê¹… í•„ìš” |
| `Map<String, Object>` í™œìš© | ë‹¨ìˆœí•œ Key-Value ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬ ê°€ëŠ¥ | ê¸°ì¡´ `MsSession`ê³¼ ì¶©ëŒí•  ê°€ëŠ¥ì„± ìˆìŒ |

---

### **ğŸ“Œ ìµœì¢… ê²°ë¡ **
- **ê¸°ì¡´ ì½”ë“œê°€ `MsSession`ì„ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸ í›„**, `MsSession`ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ.  
- `bootstrap` ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ ì°¾ê¸° ìœ„í•´ **`MsSession` í´ë˜ìŠ¤ê°€ `Serializable`ì„ êµ¬í˜„í–ˆëŠ”ì§€ í™•ì¸**í•˜ê³ , WildFly ë¡œê·¸ì—ì„œ **ì •í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€**ë¥¼ í™•ì¸í•´ì•¼ í•¨.  
- `MsSession`ì„ ì œê±°í•˜ê³  `Map<String, Object>` ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ë„ ìˆìŒ.
