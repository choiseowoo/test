ë„¤, ì •í™•í•˜ê²Œ ì´í•´í•˜ì…¨ì–´ìš” ğŸ‘
ì œê°€ ì¢€ ë” ì‰½ê²Œ ì •ë¦¬í•´ë“œë¦´ê²Œìš”.

---

## ì™œ JUnitì—ì„œ ê·¸ëŒ€ë¡œ ì‹¤í–‰ì´ ì•ˆ ë˜ëƒ?

* ì§€ê¸ˆ `validate(FacesContext context, UIComponent component, String value)` ì•ˆì—ëŠ”
  `FacesContext`, `UIComponent` ê°™ì€ **JSF ì„œë²„(WildFly)** í™˜ê²½ì´ ìˆì–´ì•¼ë§Œ ë™ì‘í•˜ëŠ” ê°ì²´ë“¤ì´ ë“¤ì–´ìˆì–´ìš”.
* JUnitì€ **ìˆœìˆ˜ ìë°” ì‹¤í–‰ í™˜ê²½**ì´ê¸° ë•Œë¬¸ì— WildFlyë¥¼ ë„ìš°ì§€ ì•Šìœ¼ë©´ ì € ê°ì²´ë“¤ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ â†’ ì‹¤í–‰ ë¶ˆê°€ âŒ

---

## í•´ê²° ë°©ë²•

ğŸ‘‰ ê·¸ë˜ì„œ **ê²€ì¦ ë¡œì§(ì˜ë¬¸ìë§Œ í—ˆìš©, ì´ë©”ì¼ í—ˆìš©, ê¸¸ì´ ì œí•œ)** ë¶€ë¶„ë§Œ ë½‘ì•„ì„œ ë³„ë„ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ ë‘ë©´
ì´ ë¶€ë¶„ì€ **ìˆœìˆ˜ ìë°” ì½”ë“œ**ë‹ˆê¹Œ JUnitì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•´ìš”.

ì¦‰, ì´ë ‡ê²Œ ë‘ ì¸µìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê±°ì˜ˆìš”:

1. **JSFìš© Validator (ì›ë˜ ì½”ë“œ)**

   * JSFì™€ ì—°ê²° (component.getId() â†’ XML ì¡°ê±´ ì°¾ê¸°, FacesMessage ë˜ì§€ê¸° ë“±)
   * ì—¬ê¸°ì„œëŠ” ë¡œì§ì„ ì§ì ‘ í•˜ì§€ ì•Šê³ , ì•„ë˜ ë¡œì§ í´ë˜ìŠ¤ì— ìœ„ì„ë§Œ í•¨

2. **ìˆœìˆ˜ ìë°” Validator ë¡œì§ í´ë˜ìŠ¤ (JUnit í…ŒìŠ¤íŠ¸ ê°€ëŠ¥)**

   * "ì˜ë¬¸ë§Œ í—ˆìš©", "ê¸¸ì´ 7ìê¹Œì§€" ê°™ì€ ìˆœìˆ˜ ë¬¸ìì—´ ì²´í¬
   * ì—¬ê¸°ë§Œ JUnitìœ¼ë¡œ í…ŒìŠ¤íŠ¸

---

## êµ¬ì¡° ì˜ˆì‹œ

### 1. ìˆœìˆ˜ ë¡œì§ í´ë˜ìŠ¤ (JUnitì—ì„œ í…ŒìŠ¤íŠ¸)

```java
public class ItemValidatorLogic {

    public void validateItem(ItemDTO item, String value) {
        if("English".equals(item.getType()) && !value.matches("^[A-Za-z]+$")) {
            throw new IllegalArgumentException(item.getName() + "ì€(ëŠ”) ì˜ì–´ë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        }
        if("EnglishAndA".equals(item.getType()) && !value.matches("^[A-Za-z0-9@.]+$")) {
            throw new IllegalArgumentException(item.getName() + "ì€(ëŠ”) ì´ë©”ì¼ í˜•ì‹ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        }
        if(value.length() > item.getLength()) {
            throw new IllegalArgumentException(item.getName() + "ì€(ëŠ”) ìµœëŒ€ " + item.getLength() + "ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        }
    }
}
```

### 2. JUnit í…ŒìŠ¤íŠ¸

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class ItemValidatorLogicTest {

    @Test
    void testEnglishValid() {
        ItemDTO item = new ItemDTO("ì´ë¦„", "name", "English", 5);
        ItemValidatorLogic logic = new ItemValidatorLogic();
        assertDoesNotThrow(() -> logic.validateItem(item, "John"));
    }

    @Test
    void testEnglishInvalid() {
        ItemDTO item = new ItemDTO("ì´ë¦„", "name", "English", 5);
        ItemValidatorLogic logic = new ItemValidatorLogic();
        Exception ex = assertThrows(IllegalArgumentException.class,
                () -> logic.validateItem(item, "í™ê¸¸ë™"));
        assertTrue(ex.getMessage().contains("ì˜ì–´ë§Œ ì…ë ¥"));
    }
}
```

### 3. JSF Validator (ê¸°ì¡´ ì½”ë“œ, ë¡œì§ ìœ„ì„ë§Œ í•¨)

```java
@FacesValidator("itemValidator")
public class ItemValidator implements Validator<String> {

    private ItemValidatorLogic logic = new ItemValidatorLogic();

    @Override
    public void validate(FacesContext context, UIComponent component, String value) {
        // Controllerì—ì„œ itemDTO ì°¾ê¸°
        ScreenController controller = context.getApplication()
                .evaluateExpressionGet(context, "#{screenController}", ScreenController.class);
        String screenId = controller.getScreenId();
        if(screenId == null) return;

        List<ItemDTO> items = controller.getXmlCache().get(screenId);
        if(items == null) return;

        String fieldId = component.getId();
        ItemDTO item = items.stream()
                            .filter(i -> i.getId().equals(fieldId))
                            .findFirst()
                            .orElse(null);
        if(item == null) return;

        // ìˆœìˆ˜ ë¡œì§ í´ë˜ìŠ¤ì— ìœ„ì„
        try {
            logic.validateItem(item, value);
        } catch (IllegalArgumentException e) {
            throw new ValidatorException(new FacesMessage(e.getMessage()));
        }
    }
}
```

---

âœ… ì´ë ‡ê²Œ í•˜ë©´:

* **JUnit** â†’ `ItemValidatorLogic`ë§Œ í…ŒìŠ¤íŠ¸ â†’ WildFly ì—†ì´ ê°€ëŠ¥
* **ì‹¤ì œ ì‹¤í–‰(WildFly)** â†’ `ItemValidator`ê°€ ë™ì‘í•˜ë©´ì„œ ë‚´ë¶€ì ìœ¼ë¡œ `ItemValidatorLogic` í˜¸ì¶œ

---

ì¦‰, ì§ˆë¬¸ ì£¼ì‹  ëŒ€ë¡œ **validate() ì•ˆì˜ ì²´í¬ ë¡œì§ë§Œ ë³µì‚¬ â†’ ë³„ë„ í´ë˜ìŠ¤ì— ë‘ê³  JUnitì—ì„œ í…ŒìŠ¤íŠ¸**í•˜ëŠ” ë°©ì‹ì´ ë§ìŠµë‹ˆë‹¤ ğŸ‘

---

ì œê°€ ì›í•˜ì‹œë©´, ì§€ê¸ˆ ì“°ê³  ê³„ì‹  `ItemDTO` í´ë˜ìŠ¤ì— ë§ì¶°ì„œ JUnit í…ŒìŠ¤íŠ¸ìš© ìƒ˜í”Œ ë°ì´í„°ë¥¼ ê°™ì´ ë§Œë“¤ì–´ë“œë¦´ê¹Œìš”?
