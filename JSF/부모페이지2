### **âœ… êµ¬í˜„í•´ì•¼ í•  ê¸°ëŠ¥**
1. **ìœ ì € í˜ì´ì§€ì—ì„œ ìœ ì € ID ì„ íƒ í›„ ë¶€ëª¨ í˜ì´ì§€ë¡œ JavaScriptë¥¼ í†µí•´ ì „ë‹¬**
2. **ë¶€ëª¨ í˜ì´ì§€ì—ì„œ ì„ íƒëœ ìœ ì € IDë¥¼ `<h:outputLabel>`ì— í‘œì‹œ**
3. **"ë“±ë¡" ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ**
4. **"ì˜ˆ"ë¥¼ ëˆ„ë¥´ë©´ ìœ ì € ê¶Œí•œ í…Œì´ë¸”ì—ì„œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ì²˜ë¦¬**
   - ìœ ì € IDê°€ ì¡´ì¬í•˜ë©´ ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥
   - ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë“±ë¡ ì²˜ë¦¬

---

## **1ï¸âƒ£ ìœ ì € í˜ì´ì§€ (ìì‹ í˜ì´ì§€ - `user.xhtml`)**
ğŸ“Œ **ìœ ì € IDë¥¼ ì„ íƒí•˜ê³  ë¶€ëª¨ í˜ì´ì§€ë¡œ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥**

```xml
<h:form id="userForm">
    <h:dataTable id="userTable" value="#{userBean.pagedList}" var="user">
        <h:column>
            <f:facet name="header">ì„ íƒ</f:facet>
            <h:selectOneRadio id="selectUser" value="#{userBean.selectedUserId}">
                <f:selectItem itemValue="#{user.id}" />
            </h:selectOneRadio>
        </h:column>
        <h:column>
            <f:facet name="header">ìœ ì € ID</f:facet>
            #{user.id}
        </h:column>
        <h:column>
            <f:facet name="header">ì´ë¦„</f:facet>
            #{user.name}
        </h:column>
    </h:dataTable>

    <!-- ì„ íƒ ë²„íŠ¼ -->
    <h:commandButton value="ì„ íƒ" onclick="sendUserToParent()" />

    <script>
        function sendUserToParent() {
            let selectedRadio = document.querySelector('input[type="radio"]:checked');
            if (selectedRadio) {
                let userId = selectedRadio.value;
                let userName = selectedRadio.closest('tr').children[2].innerText;
                window.opener.receiveUser(userId, userName);
                window.close();
            } else {
                alert("ìœ ì €ë¥¼ ì„ íƒí•˜ì„¸ìš”.");
            }
        }
    </script>
</h:form>
```

âœ” **ì„¤ëª…**  
- **ìœ ì €ë¥¼ ì„ íƒí•˜ê³  "ì„ íƒ" ë²„íŠ¼ í´ë¦­ ì‹œ ë¶€ëª¨ í˜ì´ì§€ë¡œ ê°’ ì „ì†¡** (`window.opener.receiveUser(userId, userName)`)
- **ìœ ì € IDì™€ ì´ë¦„ì„ ë¶€ëª¨ í˜ì´ì§€ë¡œ ë„˜ê¸´ í›„ ìì‹ ì°½ ë‹«ê¸° (`window.close()`)**
- **ìœ ì €ê°€ ì„ íƒë˜ì§€ ì•Šì•˜ì„ ê²½ìš° ì•Œë¦¼ í‘œì‹œ**

---

## **2ï¸âƒ£ ë¶€ëª¨ í˜ì´ì§€ (`parent.xhtml`)**
ğŸ“Œ **ìœ ì € IDë¥¼ ë°›ì•„ì„œ `<h:outputLabel>`ì— í‘œì‹œí•˜ê³  "ë“±ë¡" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ**

```xml
<h:form id="parentForm">
    <h:panelGrid columns="2">
        <h:outputLabel for="selectedUserId" value="ì„ íƒëœ ìœ ì €:" />
        <h:outputLabel id="selectedUserLabel" value="" />

        <h:commandButton id="registerButton" value="ë“±ë¡" onclick="confirmRegistration()" disabled="true" />
    </h:panelGrid>

    <h:outputText id="errorMessage" style="color:red;" />

    <!-- ë‹¤ì´ì–¼ë¡œê·¸ -->
    <h:panelGroup id="dialogPanel" style="display:none;">
        <h:outputText value="í•´ë‹¹ ìœ ì €ë¥¼ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?" />
        <h:commandButton value="ì˜ˆ" action="#{userBean.registerUser}" />
        <h:commandButton value="ì•„ë‹ˆì˜¤" onclick="hideDialog()" />
    </h:panelGroup>

    <script>
        function receiveUser(userId, userName) {
            document.getElementById("parentForm:selectedUserLabel").innerText = userId + " " + userName;
            document.getElementById("parentForm:registerButton").disabled = false;
        }

        function confirmRegistration() {
            document.getElementById("parentForm:dialogPanel").style.display = 'block';
        }

        function hideDialog() {
            document.getElementById("parentForm:dialogPanel").style.display = 'none';
        }
    </script>
</h:form>
```

âœ” **ì„¤ëª…**  
- `receiveUser(userId, userName)` â†’ ìœ ì € í˜ì´ì§€ì—ì„œ ì „ë‹¬ëœ ê°’ì„ ë°›ì•„ `<h:outputLabel>`ì— í‘œì‹œ
- "ë“±ë¡" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ `confirmRegistration()`ì„ ì‹¤í–‰í•´ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- ë‹¤ì´ì–¼ë¡œê·¸ì—ì„œ "ì˜ˆ" í´ë¦­ ì‹œ ìœ ì € ë“±ë¡ ì‹¤í–‰, "ì•„ë‹ˆì˜¤" í´ë¦­ ì‹œ ë‹«ê¸°

---

## **3ï¸âƒ£ ë°±ì—”ë“œ ì²˜ë¦¬ (`UserBean.java`)**
ğŸ“Œ **ìœ ì € IDê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ë“±ë¡í•˜ëŠ” ë¡œì§**

```java
@ManagedBean
@ViewScoped
public class UserBean {
    private String selectedUserId;
    private String errorMessage;

    @EJB
    private UserService userService;

    public void registerUser() {
        if (userService.isUserExists(selectedUserId)) {
            errorMessage = "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìœ ì €ì…ë‹ˆë‹¤.";
        } else {
            userService.insertUser(selectedUserId);
            errorMessage = "ë“±ë¡ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
        }
    }

    // Getter & Setter
}
```

âœ” **ì„¤ëª…**  
- `isUserExists(selectedUserId)` â†’ ìœ ì € ê¶Œí•œ í…Œì´ë¸”ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸  
- ì¡´ì¬í•˜ë©´ `"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìœ ì €ì…ë‹ˆë‹¤."` ë©”ì‹œì§€ ì¶œë ¥  
- ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ `insertUser(selectedUserId)` ì‹¤í–‰  

---

## **4ï¸âƒ£ MyBatis (`UserMapper.xml`)**
ğŸ“Œ **ìœ ì € ì¡´ì¬ ì—¬ë¶€ í™•ì¸ ë° ë“±ë¡ SQL**

```xml
<select id="isUserExists" resultType="boolean">
    SELECT COUNT(*) > 0 FROM user_permissions WHERE user_id = #{userId}
</select>

<insert id="insertUser">
    INSERT INTO user_permissions (user_id, created_at) VALUES (#{userId}, NOW())
</insert>
```

---

## **âœ… ì‹¤í–‰ íë¦„**
1. **ìœ ì € í˜ì´ì§€ (`user.xhtml`)**  
   - ìœ ì €ë¥¼ ì„ íƒí•˜ê³  "ì„ íƒ" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë¶€ëª¨ í˜ì´ì§€ë¡œ ê°’ ì „ì†¡  

2. **ë¶€ëª¨ í˜ì´ì§€ (`parent.xhtml`)**  
   - `receiveUser(userId, userName)` í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ `<h:outputLabel>`ì— í‘œì‹œ  
   - "ë“±ë¡" ë²„íŠ¼ í™œì„±í™”ë¨  

3. **"ë“±ë¡" ë²„íŠ¼ í´ë¦­ ì‹œ**  
   - ë‹¤ì´ì–¼ë¡œê·¸ê°€ í‘œì‹œë¨  

4. **ë‹¤ì´ì–¼ë¡œê·¸ì—ì„œ "ì˜ˆ" í´ë¦­ ì‹œ**  
   - `registerUser()` ì‹¤í–‰  
   - ìœ ì € ê¶Œí•œ í…Œì´ë¸”ì— ì¡´ì¬í•˜ë©´ `"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìœ ì €ì…ë‹ˆë‹¤."` ì¶œë ¥  
   - ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë“±ë¡ ì™„ë£Œ  

ì´ì œ **ìœ ì € ì„ íƒ â†’ ë¶€ëª¨ í˜ì´ì§€ì— í‘œì‹œ â†’ ë‹¤ì´ì–¼ë¡œê·¸ í™•ì¸ â†’ ìœ ì € ë“±ë¡ ë¡œì§**ì´ ì™„ì„±ë˜ì—ˆì–´!  
ì¶”ê°€ ìˆ˜ì •ì´ í•„ìš”í•˜ë©´ ì•Œë ¤ì¤˜!
